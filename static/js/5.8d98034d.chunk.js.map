{"version":3,"sources":["components/PostSetting.jsx","components/Comments.jsx","pages/Post.jsx","components/BackBtn.jsx","components/Footer.jsx","components/Markdown.jsx"],"names":["PostSetting","id","onDelete","className","to","pathname","onClick","Comments","commentRef","createRef","useEffect","utterances","document","createElement","Object","entries","src","repo","theme","crossorigin","async","forEach","key","value","setAttribute","current","appendChild","ref","Post","postService","deletePost","params","useParams","history","useHistory","useState","post","setPost","isReady","setIsReady","user","useAuth","getPostById","then","data","catch","console","error","setTimeout","motion","div","initial","opacity","animate","exit","transition","duration","delay","style","position","zIndex","BackBtn","title","converted","Date","year","getFullYear","month","toLocaleString","date","getDate","convertDate","createdAt","Markdown","text","token","window","confirm","push","Footer","Loading","React","memo","onOpenLoginModal","onLogout","syntaxHighlighter","code","node","inline","children","props","match","exec","materialDark","language","PreTag","String","replace","components","remarkPlugins","gfm"],"mappings":"uRAiBeA,EAbK,SAAC,GAAoB,IAAnBC,EAAkB,EAAlBA,GAAIC,EAAc,EAAdA,SACxB,OACE,sBAAKC,UAAU,cAAf,UACE,cAAC,IAAD,CAAMC,GAAI,CAAEC,SAAS,SAAD,OAAWJ,EAAX,UAApB,kBAGA,qBAAKE,UAAU,gBAAgBG,QAAS,kBAAMJ,EAASD,IAAvD,wBCoBSM,G,OA3BE,WACf,IAAMC,EAAaC,sBAqBnB,OAnBAC,qBAAU,WACR,IAAMC,EAAaC,SAASC,cAAc,UAW1CC,OAAOC,QATkB,CACvBC,IAAK,gCACLC,KAAM,2BACN,aAAc,MACdC,MAAO,eACPC,YAAa,YACbC,OAAO,IAGwBC,SAAQ,YAAmB,IAAD,mBAAhBC,EAAgB,KAAXC,EAAW,KACzDZ,EAAWa,aAAaF,EAAKC,MAG/Bf,EAAWiB,QAAQC,YAAYf,KAC9B,IAGD,qBAAKR,UAAU,WAAWwB,IAAKnB,M,gBCb7BoB,G,OAAO,SAAC,GAA+B,IAA9BC,EAA6B,EAA7BA,YAAaC,EAAgB,EAAhBA,WACpBC,EAASC,cACTC,EAAUC,cAChB,EAAwBC,mBAAS,IAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA8BF,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACQC,EAASC,cAATD,KAGR9B,qBAAU,WACRmB,EACGa,YAAYX,EAAO9B,IACnB0C,MAAK,SAACC,GAAD,OAAUP,EAAQO,MACvBC,MAAMC,QAAQC,WAChB,CAAClB,EAAaE,EAAO9B,KAGxBS,qBAAU,WACQ,MAAT,OAAJ0B,QAAI,IAAJA,OAAA,EAAAA,EAAMnC,KACP+C,YAAW,WACTT,GAAW,KACV,OAEJ,CAACH,IAwBJ,OACE,mCACEE,EACC,eAACW,EAAA,EAAOC,IAAR,CACCC,QAAS,CAAEC,QAAS,GACpBC,QAAS,CAAED,QAAS,GACpBE,KAAM,CAAEF,QAAS,GACjBG,WAAY,CAAEC,SAAU,GAAKC,MAAO,IACpCC,MAAO,CACLC,SAAU,WACVC,OAAQ,IAPX,UAUC,cAACC,EAAA,EAAD,IACA,0BAAS1D,UAAU,OAAnB,UACE,oBAAIA,UAAU,cAAd,SACGiC,EAAK0B,QAER,sBAAM3D,UAAU,kBAAhB,SA5BY,SAACoB,GACnB,IAAMwC,EAAY,IAAIC,KAAKzC,GACrB0C,EAAOF,EAAUG,cACjBC,EAAQJ,EAAUK,eAAe,KAAM,CAAED,MAAO,UAChDE,EAAON,EAAUO,UAEvB,MAAM,GAAN,OAAUD,EAAV,YAAkBF,EAAlB,YAA2BF,GAuBlBM,CAAYnC,EAAKoC,aAEpB,qBAAKrE,UAAU,iBAAf,SACE,cAACsE,EAAA,EAAD,CAAUC,KAAMtC,EAAKsC,UAElB,OAAJlC,QAAI,IAAJA,OAAA,EAAAA,EAAMmC,QACL,cAAC,EAAD,CAAa1E,GAAI8B,EAAO9B,GAAIC,SA9CrB,SAACD,GACZ2E,OAAOC,QAAQ,sCACjBhD,EACGC,WAAW7B,GACX0C,MAAK,kBAAMb,EAAW7B,MACtB4C,MAAMC,QAAQC,SAEjBd,EAAQ6C,KAAK,SAyCT,cAAC,EAAD,OAEF,cAACC,EAAA,EAAD,OA3BQ,cAACC,EAAA,EAAD,QAmCDC,cAAMC,KAAKtD,I,gCChG1B,2CAKMiC,EAAU,WACd,OACE,uBAAO1D,UAAU,UAAjB,SACE,8BACE,cAAC,IAAD,CAAMC,GAAG,IAAID,UAAU,eAAvB,8BAQO8E,QAAMC,KAAKrB,I,qDCjB1B,0DAKMkB,EAAS,SAAC,GAAuB,EAAtBI,iBAAuB,IAChClD,EAAUC,cAChB,EAA2BO,cAAnBD,EAAR,EAAQA,KAAM4C,EAAd,EAAcA,SASd,OACE,yBAAQjF,UAAU,SAAlB,WACQ,OAAJqC,QAAI,IAAJA,OAAA,EAAAA,EAAMmC,OACJ,wBAAQxE,UAAU,iBAAiBG,QAVjB,WACpBsE,OAAOC,QAAQ,6BACjBO,IACAnD,EAAQ6C,KAAK,OAOT,0BAIA,cAAC,IAAD,CAAM3E,UAAU,gBAAgBC,GAAG,SAAnC,2BAIJ,mBAAGD,UAAU,oBAAb,oCAOS8E,QAAMC,KAAKH,I,iMCDXN,IAzBE,SAAC,GAAY,IAAXC,EAAU,EAAVA,KAEXW,EAAoB,CACxBC,KADwB,YAC4B,EAA9CC,KAA+C,IAAzCC,EAAwC,EAAxCA,OAAQrF,EAAgC,EAAhCA,UAAWsF,EAAqB,EAArBA,SAAaC,EAAQ,iBAC5CC,EAAQ,iBAAiBC,KAAKzF,GAAa,IACjD,OAAQqF,GAAUG,EAChB,cAAC,IAAD,aAAmBjC,MAAOmC,IAAcC,SAAUH,EAAM,GAAII,OAAO,MAAMN,SAAUO,OAAOP,GAAUQ,QAAQ,MAAO,KAASP,IAE5H,8CAAMvF,UAAWA,GAAeuF,GAAhC,aACGD,OAMT,OACE,qBAAKtF,UAAU,WAAf,SACE,cAAC,IAAD,CACE+F,WAAYb,EACZc,cAAe,CAACC,KAChBX,SAAUf,Q","file":"static/js/5.8d98034d.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport '../style/postSetting.scss';\n\nconst PostSetting = ({id, onDelete}) => {\n  return (\n    <div className=\"postSetting\">\n      <Link to={{ pathname: `/post/${id}/edit` }}>\n        Edit\n      </Link>\n      <div className='deletePostBtn' onClick={() => onDelete(id)}>\n        Delete\n      </div>\n    </div>\n  )\n}\n\nexport default PostSetting;","import React, { createRef, useEffect } from 'react';\nimport '../style/comments.scss';\n\nconst Comments = () => {\n  const commentRef = createRef();\n\n  useEffect(() => {\n    const utterances = document.createElement('script');\n\n    const utterancesConfig = {\n      src: \"https://utteranc.es/client.js\",\n      repo: \"jiasong214/blog-comments\",\n      \"issue-term\": \"url\",\n      theme: \"github-light\",\n      crossorigin: \"anonymous\",\n      async: true\n    }\n\n    Object.entries(utterancesConfig).forEach(([key, value]) => {\n      utterances.setAttribute(key, value);\n    });\n\n    commentRef.current.appendChild(utterances);\n  }, []);\n\n  return (\n    <div className='comments' ref={commentRef} />\n  )\n}\n\nexport default Comments;","import React, { useEffect, useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport { useAuth } from '../context/AuthContext';\nimport BackBtn from '../components/BackBtn';\nimport Markdown from '../components/Markdown';\nimport PostSetting from '../components/PostSetting';\nimport Comments from '../components/Comments';\nimport Loading from '../components/Loading';\nimport Footer from '../components/Footer';\nimport '../style/post.scss';\n\n\nconst Post = ({postService, deletePost}) => {\n  const params = useParams();\n  const history = useHistory();\n  const [post, setPost] = useState([]);\n  const [isReady, setIsReady] = useState(false);\n  const { user } = useAuth();\n\n  // get the post\n  useEffect(() => {\n    postService\n      .getPostById(params.id)\n      .then((data) => setPost(data))\n      .catch(console.error());\n  }, [postService, params.id]);\n\n  // ready to show\n  useEffect(() => {\n    if(post?.id !== \"\") {\n      setTimeout(() => {\n        setIsReady(true);\n      }, 1000)\n    }\n  }, [post]);\n\n\n  const onDelete = (id) => {\n    if (window.confirm('Do you want to delete this post?')) {\n      postService\n        .deletePost(id)\n        .then(() => deletePost(id))\n        .catch(console.error());\n      \n      history.push(\"/\");\n    }\n  };\n\n  const convertDate = (value) => {\n    const converted = new Date(value);\n    const year = converted.getFullYear();\n    const month = converted.toLocaleString('en', { month: 'short' });;\n    const date = converted.getDate();\n\n    return `${date} ${month} ${year}`;\n  }\n\n\n  return (\n    <>\n    {!isReady ? <Loading /> :\n      (<motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        transition={{ duration: 0.3, delay: 0.3 }}\n        style={{\n          position: \"relative\",\n          zIndex: 10\n        }}\n      >\n        <BackBtn />\n        <section className='post'>\n          <h2 className=\"post__title\">\n            {post.title}\n          </h2>\n          <span className=\"post__createdAt\">\n            {convertDate(post.createdAt)}\n          </span>\n          <div className=\"post__contents\">\n            <Markdown text={post.text} />\n          </div>\n          {user?.token && \n            <PostSetting id={params.id} onDelete={onDelete} />\n          }\n          <Comments />\n        </section>\n        <Footer />\n      </motion.div>\n      )\n    }\n    </>\n  )\n}\n\nexport default React.memo(Post);","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport '../style/backBtn.scss';\n\n\nconst BackBtn = () => {\n  return (\n    <aside className=\"backBtn\">\n      <div>\n        <Link to='/' className=\"hover-button\">\n          &larr; Back\n        </Link>\n      </div>\n    </aside>\n  )\n}\n\nexport default React.memo(BackBtn);","import React from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport '../style/footer.scss';\n\nconst Footer = ({onOpenLoginModal}) => {\n  const history = useHistory();\n  const { user, onLogout } = useAuth();\n\n  const handleClickLogout = () => {\n    if (window.confirm('Do you want to log out?')) {\n      onLogout();\n      history.push('/');\n    }\n  }\n\n  return (\n    <footer className=\"footer\">\n       {user?.token ?\n          <button className='footer__logout' onClick={handleClickLogout}>\n            Logout Admin\n          </button> \n          : \n          <Link className=\"footer__login\" to=\"/login\">\n            Admin account\n          </Link>\n        }\n      <p className=\"footer__copyright\">\n        &copy; 2021 Jia Song\n      </p>\n    </footer>\n  )\n}\n\nexport default React.memo(Footer);","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport {Prism as SyntaxHighlighter} from 'react-syntax-highlighter';\nimport {materialDark} from 'react-syntax-highlighter/dist/esm/styles/prism';\nimport gfm from 'remark-gfm';\nimport '../style/markdown.scss';\n\n\nconst Markdown = ({text}) => {\n\n  const syntaxHighlighter = {\n    code({node, inline, className, children, ...props}) {\n      const match = /language-(\\w+)/.exec(className || '')\n      return !inline && match ? (\n        <SyntaxHighlighter style={materialDark} language={match[1]} PreTag=\"div\" children={String(children).replace(/\\n$/, '')} {...props} />\n      ) : (\n        <code className={className} {...props}>\n          {children}\n        </code>\n      )\n    }\n  }\n\n  return (\n    <div className=\"markdown\">\n      <ReactMarkdown\n        components={syntaxHighlighter}\n        remarkPlugins={[gfm]} \n        children={text} />\n    </div>\n  )\n}\n\nexport default Markdown;"],"sourceRoot":""}