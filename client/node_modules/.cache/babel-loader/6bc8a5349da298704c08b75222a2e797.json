{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst prosemirror_state_1 = require(\"prosemirror-state\");\n\nconst prosemirror_view_1 = require(\"prosemirror-view\");\n\nconst Extension_1 = __importDefault(require(\"../lib/Extension\"));\n\nclass Placeholder extends Extension_1.default {\n  get name() {\n    return \"empty-placeholder\";\n  }\n\n  get defaultOptions() {\n    return {\n      emptyNodeClass: \"placeholder\",\n      placeholder: \"\"\n    };\n  }\n\n  get plugins() {\n    return [new prosemirror_state_1.Plugin({\n      props: {\n        decorations: state => {\n          const {\n            doc\n          } = state;\n          const decorations = [];\n          const completelyEmpty = doc.textContent === \"\" && doc.childCount <= 1 && doc.content.size <= 2;\n          doc.descendants((node, pos) => {\n            if (!completelyEmpty) {\n              return;\n            }\n\n            if (pos !== 0 || node.type.name !== \"paragraph\") {\n              return;\n            }\n\n            const decoration = prosemirror_view_1.Decoration.node(pos, pos + node.nodeSize, {\n              class: this.options.emptyNodeClass,\n              \"data-empty-text\": this.options.placeholder\n            });\n            decorations.push(decoration);\n          });\n          return prosemirror_view_1.DecorationSet.create(doc, decorations);\n        }\n      }\n    })];\n  }\n\n}\n\nexports.default = Placeholder;","map":{"version":3,"sources":["../../src/plugins/Placeholder.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,MAAA,mBAAA,GAAA,OAAA,CAAA,mBAAA,CAAA;;AACA,MAAA,kBAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;;AACA,MAAA,WAAA,GAAA,eAAA,CAAA,OAAA,CAAA,kBAAA,CAAA,CAAA;;AAEA,MAAqB,WAArB,SAAyC,WAAA,CAAA,OAAzC,CAAkD;AACxC,MAAJ,IAAI,GAAA;AACN,WAAO,mBAAP;AACD;;AAEiB,MAAd,cAAc,GAAA;AAChB,WAAO;AACL,MAAA,cAAc,EAAE,aADX;AAEL,MAAA,WAAW,EAAE;AAFR,KAAP;AAID;;AAEU,MAAP,OAAO,GAAA;AACT,WAAO,CACL,IAAI,mBAAA,CAAA,MAAJ,CAAW;AACT,MAAA,KAAK,EAAE;AACL,QAAA,WAAW,EAAE,KAAK,IAAG;AACnB,gBAAM;AAAE,YAAA;AAAF,cAAU,KAAhB;AACA,gBAAM,WAAW,GAAiB,EAAlC;AACA,gBAAM,eAAe,GACnB,GAAG,CAAC,WAAJ,KAAoB,EAApB,IACA,GAAG,CAAC,UAAJ,IAAkB,CADlB,IAEA,GAAG,CAAC,OAAJ,CAAY,IAAZ,IAAoB,CAHtB;AAKA,UAAA,GAAG,CAAC,WAAJ,CAAgB,CAAC,IAAD,EAAO,GAAP,KAAc;AAC5B,gBAAI,CAAC,eAAL,EAAsB;AACpB;AACD;;AACD,gBAAI,GAAG,KAAK,CAAR,IAAa,IAAI,CAAC,IAAL,CAAU,IAAV,KAAmB,WAApC,EAAiD;AAC/C;AACD;;AAED,kBAAM,UAAU,GAAG,kBAAA,CAAA,UAAA,CAAW,IAAX,CAAgB,GAAhB,EAAqB,GAAG,GAAG,IAAI,CAAC,QAAhC,EAA0C;AAC3D,cAAA,KAAK,EAAE,KAAK,OAAL,CAAa,cADuC;AAE3D,iCAAmB,KAAK,OAAL,CAAa;AAF2B,aAA1C,CAAnB;AAIA,YAAA,WAAW,CAAC,IAAZ,CAAiB,UAAjB;AACD,WAbD;AAeA,iBAAO,kBAAA,CAAA,aAAA,CAAc,MAAd,CAAqB,GAArB,EAA0B,WAA1B,CAAP;AACD;AAzBI;AADE,KAAX,CADK,CAAP;AA+BD;;AA5C+C;;AAAlD,OAAA,CAAA,OAAA,GAAA,WAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst prosemirror_state_1 = require(\"prosemirror-state\");\nconst prosemirror_view_1 = require(\"prosemirror-view\");\nconst Extension_1 = __importDefault(require(\"../lib/Extension\"));\nclass Placeholder extends Extension_1.default {\n    get name() {\n        return \"empty-placeholder\";\n    }\n    get defaultOptions() {\n        return {\n            emptyNodeClass: \"placeholder\",\n            placeholder: \"\",\n        };\n    }\n    get plugins() {\n        return [\n            new prosemirror_state_1.Plugin({\n                props: {\n                    decorations: state => {\n                        const { doc } = state;\n                        const decorations = [];\n                        const completelyEmpty = doc.textContent === \"\" &&\n                            doc.childCount <= 1 &&\n                            doc.content.size <= 2;\n                        doc.descendants((node, pos) => {\n                            if (!completelyEmpty) {\n                                return;\n                            }\n                            if (pos !== 0 || node.type.name !== \"paragraph\") {\n                                return;\n                            }\n                            const decoration = prosemirror_view_1.Decoration.node(pos, pos + node.nodeSize, {\n                                class: this.options.emptyNodeClass,\n                                \"data-empty-text\": this.options.placeholder,\n                            });\n                            decorations.push(decoration);\n                        });\n                        return prosemirror_view_1.DecorationSet.create(doc, decorations);\n                    },\n                },\n            }),\n        ];\n    }\n}\nexports.default = Placeholder;\n//# sourceMappingURL=Placeholder.js.map"]},"metadata":{},"sourceType":"script"}