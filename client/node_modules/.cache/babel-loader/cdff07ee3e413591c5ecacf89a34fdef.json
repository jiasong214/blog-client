{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.theme = void 0;\n\nconst React = __importStar(require(\"react\"));\n\nconst memoize_1 = __importDefault(require(\"lodash/memoize\"));\n\nconst prosemirror_state_1 = require(\"prosemirror-state\");\n\nconst prosemirror_dropcursor_1 = require(\"prosemirror-dropcursor\");\n\nconst prosemirror_gapcursor_1 = require(\"prosemirror-gapcursor\");\n\nconst prosemirror_view_1 = require(\"prosemirror-view\");\n\nconst prosemirror_model_1 = require(\"prosemirror-model\");\n\nconst prosemirror_inputrules_1 = require(\"prosemirror-inputrules\");\n\nconst prosemirror_keymap_1 = require(\"prosemirror-keymap\");\n\nconst prosemirror_commands_1 = require(\"prosemirror-commands\");\n\nconst prosemirror_utils_1 = require(\"prosemirror-utils\");\n\nconst styled_components_1 = __importStar(require(\"styled-components\"));\n\nconst theme_1 = require(\"./theme\");\n\nconst dictionary_1 = __importDefault(require(\"./dictionary\"));\n\nconst Flex_1 = __importDefault(require(\"./components/Flex\"));\n\nconst SelectionToolbar_1 = __importDefault(require(\"./components/SelectionToolbar\"));\n\nconst BlockMenu_1 = __importDefault(require(\"./components/BlockMenu\"));\n\nconst LinkToolbar_1 = __importDefault(require(\"./components/LinkToolbar\"));\n\nconst Tooltip_1 = __importDefault(require(\"./components/Tooltip\"));\n\nconst ExtensionManager_1 = __importDefault(require(\"./lib/ExtensionManager\"));\n\nconst ComponentView_1 = __importDefault(require(\"./lib/ComponentView\"));\n\nconst headingToSlug_1 = __importDefault(require(\"./lib/headingToSlug\"));\n\nconst Doc_1 = __importDefault(require(\"./nodes/Doc\"));\n\nconst Text_1 = __importDefault(require(\"./nodes/Text\"));\n\nconst Blockquote_1 = __importDefault(require(\"./nodes/Blockquote\"));\n\nconst BulletList_1 = __importDefault(require(\"./nodes/BulletList\"));\n\nconst CodeBlock_1 = __importDefault(require(\"./nodes/CodeBlock\"));\n\nconst CodeFence_1 = __importDefault(require(\"./nodes/CodeFence\"));\n\nconst CheckboxList_1 = __importDefault(require(\"./nodes/CheckboxList\"));\n\nconst CheckboxItem_1 = __importDefault(require(\"./nodes/CheckboxItem\"));\n\nconst Embed_1 = __importDefault(require(\"./nodes/Embed\"));\n\nconst HardBreak_1 = __importDefault(require(\"./nodes/HardBreak\"));\n\nconst Heading_1 = __importDefault(require(\"./nodes/Heading\"));\n\nconst HorizontalRule_1 = __importDefault(require(\"./nodes/HorizontalRule\"));\n\nconst Image_1 = __importDefault(require(\"./nodes/Image\"));\n\nconst ListItem_1 = __importDefault(require(\"./nodes/ListItem\"));\n\nconst Notice_1 = __importDefault(require(\"./nodes/Notice\"));\n\nconst OrderedList_1 = __importDefault(require(\"./nodes/OrderedList\"));\n\nconst Paragraph_1 = __importDefault(require(\"./nodes/Paragraph\"));\n\nconst Table_1 = __importDefault(require(\"./nodes/Table\"));\n\nconst TableCell_1 = __importDefault(require(\"./nodes/TableCell\"));\n\nconst TableHeadCell_1 = __importDefault(require(\"./nodes/TableHeadCell\"));\n\nconst TableRow_1 = __importDefault(require(\"./nodes/TableRow\"));\n\nconst Bold_1 = __importDefault(require(\"./marks/Bold\"));\n\nconst Code_1 = __importDefault(require(\"./marks/Code\"));\n\nconst Highlight_1 = __importDefault(require(\"./marks/Highlight\"));\n\nconst Italic_1 = __importDefault(require(\"./marks/Italic\"));\n\nconst Link_1 = __importDefault(require(\"./marks/Link\"));\n\nconst Strikethrough_1 = __importDefault(require(\"./marks/Strikethrough\"));\n\nconst Placeholder_1 = __importDefault(require(\"./marks/Placeholder\"));\n\nconst Underline_1 = __importDefault(require(\"./marks/Underline\"));\n\nconst BlockMenuTrigger_1 = __importDefault(require(\"./plugins/BlockMenuTrigger\"));\n\nconst History_1 = __importDefault(require(\"./plugins/History\"));\n\nconst Keys_1 = __importDefault(require(\"./plugins/Keys\"));\n\nconst MaxLength_1 = __importDefault(require(\"./plugins/MaxLength\"));\n\nconst Placeholder_2 = __importDefault(require(\"./plugins/Placeholder\"));\n\nconst SmartText_1 = __importDefault(require(\"./plugins/SmartText\"));\n\nconst TrailingNode_1 = __importDefault(require(\"./plugins/TrailingNode\"));\n\nconst MarkdownPaste_1 = __importDefault(require(\"./plugins/MarkdownPaste\"));\n\nvar server_1 = require(\"./server\");\n\nObject.defineProperty(exports, \"schema\", {\n  enumerable: true,\n  get: function () {\n    return server_1.schema;\n  }\n});\nObject.defineProperty(exports, \"parser\", {\n  enumerable: true,\n  get: function () {\n    return server_1.parser;\n  }\n});\nObject.defineProperty(exports, \"serializer\", {\n  enumerable: true,\n  get: function () {\n    return server_1.serializer;\n  }\n});\nObject.defineProperty(exports, \"renderToHtml\", {\n  enumerable: true,\n  get: function () {\n    return server_1.renderToHtml;\n  }\n});\n\nvar Extension_1 = require(\"./lib/Extension\");\n\nObject.defineProperty(exports, \"Extension\", {\n  enumerable: true,\n  get: function () {\n    return Extension_1.default;\n  }\n});\nexports.theme = theme_1.light;\n\nclass RichMarkdownEditor extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isRTL: false,\n      isEditorFocused: false,\n      selectionMenuOpen: false,\n      blockMenuOpen: false,\n      linkMenuOpen: false,\n      blockMenuSearch: \"\"\n    };\n\n    this.calculateDir = () => {\n      if (!this.element) return;\n      const isRTL = this.props.dir === \"rtl\" || getComputedStyle(this.element).direction === \"rtl\";\n\n      if (this.state.isRTL !== isRTL) {\n        this.setState({\n          isRTL\n        });\n      }\n    };\n\n    this.value = () => {\n      return this.serializer.serialize(this.view.state.doc);\n    };\n\n    this.handleChange = () => {\n      if (!this.props.onChange) return;\n      this.props.onChange(() => {\n        return this.value();\n      });\n    };\n\n    this.handleSave = () => {\n      const {\n        onSave\n      } = this.props;\n\n      if (onSave) {\n        onSave({\n          done: false\n        });\n      }\n    };\n\n    this.handleSaveAndExit = () => {\n      const {\n        onSave\n      } = this.props;\n\n      if (onSave) {\n        onSave({\n          done: true\n        });\n      }\n    };\n\n    this.handleEditorBlur = () => {\n      this.setState({\n        isEditorFocused: false\n      });\n    };\n\n    this.handleEditorFocus = () => {\n      this.setState({\n        isEditorFocused: true\n      });\n    };\n\n    this.handleOpenSelectionMenu = () => {\n      this.setState({\n        blockMenuOpen: false,\n        selectionMenuOpen: true\n      });\n    };\n\n    this.handleCloseSelectionMenu = () => {\n      this.setState({\n        selectionMenuOpen: false\n      });\n    };\n\n    this.handleOpenLinkMenu = () => {\n      this.setState({\n        blockMenuOpen: false,\n        linkMenuOpen: true\n      });\n    };\n\n    this.handleCloseLinkMenu = () => {\n      this.setState({\n        linkMenuOpen: false\n      });\n    };\n\n    this.handleOpenBlockMenu = search => {\n      this.setState({\n        blockMenuOpen: true,\n        blockMenuSearch: search\n      });\n    };\n\n    this.handleCloseBlockMenu = () => {\n      if (!this.state.blockMenuOpen) return;\n      this.setState({\n        blockMenuOpen: false\n      });\n    };\n\n    this.handleSelectRow = (index, state) => {\n      this.view.dispatch(prosemirror_utils_1.selectRow(index)(state.tr));\n    };\n\n    this.handleSelectColumn = (index, state) => {\n      this.view.dispatch(prosemirror_utils_1.selectColumn(index)(state.tr));\n    };\n\n    this.handleSelectTable = state => {\n      this.view.dispatch(prosemirror_utils_1.selectTable(state.tr));\n    };\n\n    this.focusAtStart = () => {\n      const selection = prosemirror_state_1.Selection.atStart(this.view.state.doc);\n      const transaction = this.view.state.tr.setSelection(selection);\n      this.view.dispatch(transaction);\n      this.view.focus();\n    };\n\n    this.focusAtEnd = () => {\n      const selection = prosemirror_state_1.Selection.atEnd(this.view.state.doc);\n      const transaction = this.view.state.tr.setSelection(selection);\n      this.view.dispatch(transaction);\n      this.view.focus();\n    };\n\n    this.getHeadings = () => {\n      const headings = [];\n      const previouslySeen = {};\n      this.view.state.doc.forEach(node => {\n        if (node.type.name === \"heading\") {\n          const slug = headingToSlug_1.default(node);\n          let id = slug;\n\n          if (previouslySeen[slug] > 0) {\n            id = headingToSlug_1.default(node, previouslySeen[slug]);\n          }\n\n          previouslySeen[slug] = previouslySeen[slug] !== undefined ? previouslySeen[slug] + 1 : 1;\n          headings.push({\n            title: node.textContent,\n            level: node.attrs.level,\n            id\n          });\n        }\n      });\n      return headings;\n    };\n\n    this.theme = () => {\n      return this.props.theme || (this.props.dark ? theme_1.dark : theme_1.light);\n    };\n\n    this.dictionary = memoize_1.default(providedDictionary => {\n      return Object.assign(Object.assign({}, dictionary_1.default), providedDictionary);\n    });\n\n    this.render = () => {\n      const {\n        dir,\n        readOnly,\n        readOnlyWriteCheckboxes,\n        style,\n        tooltip,\n        className,\n        onKeyDown\n      } = this.props;\n      const {\n        isRTL\n      } = this.state;\n      const dictionary = this.dictionary(this.props.dictionary);\n      return React.createElement(Flex_1.default, {\n        onKeyDown: onKeyDown,\n        style: style,\n        className: className,\n        align: \"flex-start\",\n        justify: \"center\",\n        dir: dir,\n        column: true\n      }, React.createElement(styled_components_1.ThemeProvider, {\n        theme: this.theme()\n      }, React.createElement(React.Fragment, null, React.createElement(StyledEditor, {\n        dir: dir,\n        rtl: isRTL,\n        readOnly: readOnly,\n        readOnlyWriteCheckboxes: readOnlyWriteCheckboxes,\n        ref: ref => this.element = ref\n      }), !readOnly && this.view && React.createElement(React.Fragment, null, React.createElement(SelectionToolbar_1.default, {\n        view: this.view,\n        dictionary: dictionary,\n        commands: this.commands,\n        rtl: isRTL,\n        isTemplate: this.props.template === true,\n        onOpen: this.handleOpenSelectionMenu,\n        onClose: this.handleCloseSelectionMenu,\n        onSearchLink: this.props.onSearchLink,\n        onClickLink: this.props.onClickLink,\n        onCreateLink: this.props.onCreateLink,\n        tooltip: tooltip\n      }), React.createElement(LinkToolbar_1.default, {\n        view: this.view,\n        dictionary: dictionary,\n        isActive: this.state.linkMenuOpen,\n        onCreateLink: this.props.onCreateLink,\n        onSearchLink: this.props.onSearchLink,\n        onClickLink: this.props.onClickLink,\n        onShowToast: this.props.onShowToast,\n        onClose: this.handleCloseLinkMenu,\n        tooltip: tooltip\n      }), React.createElement(BlockMenu_1.default, {\n        view: this.view,\n        commands: this.commands,\n        dictionary: dictionary,\n        rtl: isRTL,\n        isActive: this.state.blockMenuOpen,\n        search: this.state.blockMenuSearch,\n        onClose: this.handleCloseBlockMenu,\n        uploadImage: this.props.uploadImage,\n        onLinkToolbarOpen: this.handleOpenLinkMenu,\n        onImageUploadStart: this.props.onImageUploadStart,\n        onImageUploadStop: this.props.onImageUploadStop,\n        onShowToast: this.props.onShowToast,\n        embeds: this.props.embeds\n      })))));\n    };\n  }\n\n  componentDidMount() {\n    this.init();\n\n    if (this.props.scrollTo) {\n      this.scrollToAnchor(this.props.scrollTo);\n    }\n\n    this.calculateDir();\n    if (this.props.readOnly) return;\n\n    if (this.props.autoFocus) {\n      this.focusAtEnd();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.value && prevProps.value !== this.props.value) {\n      const newState = this.createState(this.props.value);\n      this.view.updateState(newState);\n    }\n\n    if (prevProps.readOnly !== this.props.readOnly) {\n      this.view.update(Object.assign(Object.assign({}, this.view.props), {\n        editable: () => !this.props.readOnly\n      }));\n    }\n\n    if (this.props.scrollTo && this.props.scrollTo !== prevProps.scrollTo) {\n      this.scrollToAnchor(this.props.scrollTo);\n    }\n\n    if (prevProps.readOnly && !this.props.readOnly && this.props.autoFocus) {\n      this.focusAtEnd();\n    }\n\n    if (prevProps.dir !== this.props.dir) {\n      this.calculateDir();\n    }\n\n    if (!this.isBlurred && !this.state.isEditorFocused && !this.state.blockMenuOpen && !this.state.linkMenuOpen && !this.state.selectionMenuOpen) {\n      this.isBlurred = true;\n\n      if (this.props.onBlur) {\n        this.props.onBlur();\n      }\n    }\n\n    if (this.isBlurred && (this.state.isEditorFocused || this.state.blockMenuOpen || this.state.linkMenuOpen || this.state.selectionMenuOpen)) {\n      this.isBlurred = false;\n\n      if (this.props.onFocus) {\n        this.props.onFocus();\n      }\n    }\n  }\n\n  init() {\n    this.extensions = this.createExtensions();\n    this.nodes = this.createNodes();\n    this.marks = this.createMarks();\n    this.schema = this.createSchema();\n    this.plugins = this.createPlugins();\n    this.keymaps = this.createKeymaps();\n    this.serializer = this.createSerializer();\n    this.parser = this.createParser();\n    this.inputRules = this.createInputRules();\n    this.nodeViews = this.createNodeViews();\n    this.view = this.createView();\n    this.commands = this.createCommands();\n  }\n\n  createExtensions() {\n    const dictionary = this.dictionary(this.props.dictionary);\n    return new ExtensionManager_1.default([...[new Doc_1.default(), new Text_1.default(), new HardBreak_1.default(), new Paragraph_1.default(), new Blockquote_1.default(), new CodeBlock_1.default({\n      dictionary,\n      onShowToast: this.props.onShowToast\n    }), new CodeFence_1.default({\n      dictionary,\n      onShowToast: this.props.onShowToast\n    }), new CheckboxList_1.default(), new CheckboxItem_1.default(), new BulletList_1.default(), new Embed_1.default(), new ListItem_1.default(), new Notice_1.default({\n      dictionary\n    }), new Heading_1.default({\n      dictionary,\n      onShowToast: this.props.onShowToast,\n      offset: this.props.headingsOffset\n    }), new HorizontalRule_1.default(), new Image_1.default({\n      dictionary,\n      uploadImage: this.props.uploadImage,\n      onImageUploadStart: this.props.onImageUploadStart,\n      onImageUploadStop: this.props.onImageUploadStop,\n      onShowToast: this.props.onShowToast\n    }), new Table_1.default(), new TableCell_1.default({\n      onSelectTable: this.handleSelectTable,\n      onSelectRow: this.handleSelectRow\n    }), new TableHeadCell_1.default({\n      onSelectColumn: this.handleSelectColumn\n    }), new TableRow_1.default(), new Bold_1.default(), new Code_1.default(), new Highlight_1.default(), new Italic_1.default(), new Placeholder_1.default(), new Underline_1.default(), new Link_1.default({\n      onKeyboardShortcut: this.handleOpenLinkMenu,\n      onClickLink: this.props.onClickLink,\n      onClickHashtag: this.props.onClickHashtag,\n      onHoverLink: this.props.onHoverLink\n    }), new Strikethrough_1.default(), new OrderedList_1.default(), new History_1.default(), new SmartText_1.default(), new TrailingNode_1.default(), new MarkdownPaste_1.default(), new Keys_1.default({\n      onBlur: this.handleEditorBlur,\n      onFocus: this.handleEditorFocus,\n      onSave: this.handleSave,\n      onSaveAndExit: this.handleSaveAndExit,\n      onCancel: this.props.onCancel\n    }), new BlockMenuTrigger_1.default({\n      dictionary,\n      onOpen: this.handleOpenBlockMenu,\n      onClose: this.handleCloseBlockMenu\n    }), new Placeholder_2.default({\n      placeholder: this.props.placeholder\n    }), new MaxLength_1.default({\n      maxLength: this.props.maxLength\n    })].filter(extension => {\n      if (this.props.disableExtensions) {\n        return !this.props.disableExtensions.includes(extension.name);\n      }\n\n      return true;\n    }), ...this.props.extensions], this);\n  }\n\n  createPlugins() {\n    return this.extensions.plugins;\n  }\n\n  createKeymaps() {\n    return this.extensions.keymaps({\n      schema: this.schema\n    });\n  }\n\n  createInputRules() {\n    return this.extensions.inputRules({\n      schema: this.schema\n    });\n  }\n\n  createNodeViews() {\n    return this.extensions.extensions.filter(extension => extension.component).reduce((nodeViews, extension) => {\n      const nodeView = (node, view, getPos, decorations) => {\n        return new ComponentView_1.default(extension.component, {\n          editor: this,\n          extension,\n          node,\n          view,\n          getPos,\n          decorations\n        });\n      };\n\n      return Object.assign(Object.assign({}, nodeViews), {\n        [extension.name]: nodeView\n      });\n    }, {});\n  }\n\n  createCommands() {\n    return this.extensions.commands({\n      schema: this.schema,\n      view: this.view\n    });\n  }\n\n  createNodes() {\n    return this.extensions.nodes;\n  }\n\n  createMarks() {\n    return this.extensions.marks;\n  }\n\n  createSchema() {\n    return new prosemirror_model_1.Schema({\n      nodes: this.nodes,\n      marks: this.marks\n    });\n  }\n\n  createSerializer() {\n    return this.extensions.serializer();\n  }\n\n  createParser() {\n    return this.extensions.parser({\n      schema: this.schema\n    });\n  }\n\n  createState(value) {\n    const doc = this.createDocument(value || this.props.defaultValue);\n    return prosemirror_state_1.EditorState.create({\n      schema: this.schema,\n      doc,\n      plugins: [...this.plugins, ...this.keymaps, prosemirror_dropcursor_1.dropCursor({\n        color: this.theme().cursor\n      }), prosemirror_gapcursor_1.gapCursor(), prosemirror_inputrules_1.inputRules({\n        rules: this.inputRules\n      }), prosemirror_keymap_1.keymap(prosemirror_commands_1.baseKeymap)]\n    });\n  }\n\n  createDocument(content) {\n    return this.parser.parse(content);\n  }\n\n  createView() {\n    if (!this.element) {\n      throw new Error(\"createView called before ref available\");\n    }\n\n    const isEditingCheckbox = tr => {\n      return tr.steps.some(step => {\n        var _a, _b, _c;\n\n        return ((_c = (_b = (_a = step.slice) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.firstChild) === null || _c === void 0 ? void 0 : _c.type.name) === this.schema.nodes.checkbox_item.name;\n      });\n    };\n\n    const view = new prosemirror_view_1.EditorView(this.element, {\n      state: this.createState(),\n      editable: () => !this.props.readOnly,\n      nodeViews: this.nodeViews,\n      handleDOMEvents: this.props.handleDOMEvents,\n      dispatchTransaction: transaction => {\n        const {\n          state,\n          transactions\n        } = this.view.state.applyTransaction(transaction);\n        this.view.updateState(state);\n\n        if (transactions.some(tr => tr.docChanged) && (!this.props.readOnly || this.props.readOnlyWriteCheckboxes && transactions.some(isEditingCheckbox))) {\n          this.handleChange();\n        }\n\n        this.calculateDir();\n        this.forceUpdate();\n      }\n    });\n    view.dom.setAttribute(\"role\", \"textbox\");\n    return view;\n  }\n\n  scrollToAnchor(hash) {\n    if (!hash) return;\n\n    try {\n      const element = document.querySelector(hash);\n      if (element) element.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    } catch (err) {\n      console.warn(`Attempted to scroll to invalid hash: ${hash}`, err);\n    }\n  }\n\n}\n\nRichMarkdownEditor.defaultProps = {\n  defaultValue: \"\",\n  dir: \"auto\",\n  placeholder: \"Write something nice…\",\n  onImageUploadStart: () => {},\n  onImageUploadStop: () => {},\n  onClickLink: href => {\n    window.open(href, \"_blank\");\n  },\n  embeds: [],\n  extensions: [],\n  tooltip: Tooltip_1.default\n};\nconst StyledEditor = styled_components_1.default(\"div\")`\n  color: ${props => props.theme.text};\n  background: ${props => props.theme.background};\n  font-family: ${props => props.theme.fontFamily};\n  font-weight: ${props => props.theme.fontWeight};\n  font-size: 1em;\n  line-height: 1.7em;\n  width: 100%;\n  .ProseMirror {\n    position: relative;\n    outline: none;\n    word-wrap: break-word;\n    white-space: pre-wrap;\n    white-space: break-spaces;\n    -webkit-font-variant-ligatures: none;\n    font-variant-ligatures: none;\n    font-feature-settings: \"liga\" 0; /* the above doesn't seem to work in Edge */\n  }\n\n  pre {\n    white-space: pre-wrap;\n  }\n\n  li {\n    position: relative;\n  }\n\n  .image {\n    text-align: center;\n    max-width: 100%;\n    clear: both;\n\n    img {\n      pointer-events: ${props => props.readOnly ? \"initial\" : \"none\"};\n      display: inline-block;\n      max-width: 100%;\n      max-height: 75vh;\n    }\n  }\n\n  .image.placeholder {\n    position: relative;\n    background: ${props => props.theme.background};\n    margin-bottom: calc(28px + 1.2em);\n\n    img {\n      opacity: 0.5;\n    }\n  }\n\n  .image-right-50 {\n    float: right;\n    width: 50%;\n    margin-left: 2em;\n    margin-bottom: 1em;\n    clear: initial;\n  }\n\n  .image-left-50 {\n    float: left;\n    width: 50%;\n    margin-right: 2em;\n    margin-bottom: 1em;\n    clear: initial;\n  }\n\n  .ProseMirror-hideselection *::selection {\n    background: transparent;\n  }\n  .ProseMirror-hideselection *::-moz-selection {\n    background: transparent;\n  }\n  .ProseMirror-hideselection {\n    caret-color: transparent;\n  }\n\n  .ProseMirror-selectednode {\n    outline: 2px solid\n      ${props => props.readOnly ? \"transparent\" : props.theme.selected};\n  }\n\n  /* Make sure li selections wrap around markers */\n\n  li.ProseMirror-selectednode {\n    outline: none;\n  }\n\n  li.ProseMirror-selectednode:after {\n    content: \"\";\n    position: absolute;\n    left: ${props => props.rtl ? \"-2px\" : \"-32px\"};\n    right: ${props => props.rtl ? \"-32px\" : \"-2px\"};\n    top: -2px;\n    bottom: -2px;\n    border: 2px solid ${props => props.theme.selected};\n    pointer-events: none;\n  }\n\n  .ProseMirror[contenteditable=\"false\"] {\n    .caption {\n      pointer-events: none;\n    }\n    .caption:empty {\n      visibility: hidden;\n    }\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin: 1em 0 0.5em;\n    font-weight: 500;\n    cursor: default;\n\n    &:not(.placeholder):before {\n      display: ${props => props.readOnly ? \"none\" : \"inline-block\"};\n      font-family: ${props => props.theme.fontFamilyMono};\n      color: ${props => props.theme.textSecondary};\n      font-size: 13px;\n      line-height: 0;\n      margin-${props => props.rtl ? \"right\" : \"left\"}: -24px;\n      width: 24px;\n    }\n\n    &:hover {\n      .heading-anchor {\n        opacity: 1;\n      }\n    }\n  }\n  .heading-content {\n    &:before {\n      content: \"​\";\n      display: inline;\n    }\n  }\n  .heading-name {\n    color: ${props => props.theme.text};\n\n    &:hover {\n      text-decoration: none;\n    }\n  }\n\n  a:first-child {\n    h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n      margin-top: 0;\n    }\n  }\n\n  h1:not(.placeholder):before {\n    content: \"H1\";\n  }\n  h2:not(.placeholder):before {\n    content: \"H2\";\n  }\n  h3:not(.placeholder):before {\n    content: \"H3\";\n  }\n  h4:not(.placeholder):before {\n    content: \"H4\";\n  }\n  h5:not(.placeholder):before {\n    content: \"H5\";\n  }\n  h6:not(.placeholder):before {\n    content: \"H6\";\n  }\n\n  .with-emoji {\n    margin-${props => props.rtl ? \"right\" : \"left\"}: -1em;\n  }\n\n  .heading-anchor {\n    opacity: 0;\n    display: ${props => props.readOnly ? \"inline-block\" : \"none\"};\n    color: ${props => props.theme.textSecondary};\n    cursor: pointer;\n    background: none;\n    border: 0;\n    outline: none;\n    padding: ${props => props.rtl ? \"2px 2px 12px 4px\" : \"2px 12px 2px 4px\"};\n    margin: 0;\n    transition: opacity 100ms ease-in-out;\n    font-family: ${props => props.theme.fontFamilyMono};\n    font-size: 22px;\n    line-height: 0;\n    margin-${props => props.rtl ? \"right\" : \"left\"}: -24px;\n    width: 24px;\n\n    &:focus,\n    &:hover {\n      color: ${props => props.theme.text};\n    }\n  }\n\n  .placeholder {\n    &:before {\n      display: block;\n      content: ${props => props.readOnly ? \"\" : \"attr(data-empty-text)\"};\n      pointer-events: none;\n      height: 0;\n      color: ${props => props.theme.placeholder};\n    }\n  }\n\n  @media print {\n    .placeholder {\n      display: none;\n    }\n  }\n\n  .notice-block {\n    display: flex;\n    align-items: center;\n    background: ${props => props.theme.noticeInfoBackground};\n    color: ${props => props.theme.noticeInfoText};\n    border-radius: 4px;\n    padding: 8px 16px;\n    margin: 8px 0;\n\n    a {\n      color: ${props => props.theme.noticeInfoText};\n    }\n\n    a:not(.heading-name) {\n      text-decoration: underline;\n    }\n  }\n\n  .notice-block .content {\n    flex-grow: 1;\n  }\n\n  .notice-block .icon {\n    width: 24px;\n    height: 24px;\n    align-self: flex-start;\n    margin-${props => props.rtl ? \"left\" : \"right\"}: 4px;\n    position: relative;\n    top: 1px;\n  }\n\n  .notice-block.tip {\n    background: ${props => props.theme.noticeTipBackground};\n    color: ${props => props.theme.noticeTipText};\n\n    a {\n      color: ${props => props.theme.noticeTipText};\n    }\n  }\n\n  .notice-block.warning {\n    background: ${props => props.theme.noticeWarningBackground};\n    color: ${props => props.theme.noticeWarningText};\n\n    a {\n      color: ${props => props.theme.noticeWarningText};\n    }\n  }\n\n  blockquote {\n    margin: 0;\n    padding-left: 1em;\n    font-style: italic;\n    overflow: hidden;\n    position: relative;\n\n    &:before {\n      content: \"\";\n      display: inline-block;\n      width: 3px;\n      border-radius: 1px;\n      position: absolute;\n      margin-${props => props.rtl ? \"right\" : \"left\"}: -16px;\n      top: 0;\n      bottom: 0;\n      background: ${props => props.theme.quote};\n    }\n  }\n\n  b,\n  strong {\n    font-weight: 600;\n  }\n\n  .template-placeholder {\n    color: ${props => props.theme.placeholder};\n    border-bottom: 1px dotted ${props => props.theme.placeholder};\n    border-radius: 2px;\n    cursor: text;\n\n    &:hover {\n      border-bottom: 1px dotted\n        ${props => props.readOnly ? props.theme.placeholder : props.theme.textSecondary};\n    }\n  }\n\n  p {\n    margin: 0;\n  }\n\n  a {\n    color: ${props => props.theme.link};\n  }\n\n  a:hover {\n    text-decoration: ${props => props.readOnly ? \"underline\" : \"none\"};\n  }\n\n  ul,\n  ol {\n    margin: ${props => props.rtl ? \"0 -26px 0 0.1em\" : \"0 0.1em 0 -26px\"};\n    padding: ${props => props.rtl ? \"0 44px 0 0\" : \"0 0 0 44px\"};\n\n    ul,\n    ol {\n      margin-${props => props.rtl ? \"left\" : \"right\"}: -24px;\n    }\n  }\n\n  ol ol {\n    list-style: lower-alpha;\n  }\n\n  ol ol ol {\n    list-style: lower-roman;\n  }\n\n  ul.checkbox_list {\n    list-style: none;\n    padding: 0;\n    margin: ${props => props.rtl ? \"0 -24px 0 0\" : \"0 0 0 -24px\"};\n  }\n\n  ul li,\n  ol li {\n    position: relative;\n    white-space: initial;\n\n    p {\n      white-space: pre-wrap;\n    }\n\n    > div {\n      width: 100%;\n    }\n  }\n\n  ul.checkbox_list li {\n    display: flex;\n    padding-${props => props.rtl ? \"right\" : \"left\"}: 24px;\n  }\n\n  ul.checkbox_list li.checked > div > p {\n    color: ${props => props.theme.textSecondary};\n    text-decoration: line-through;\n  }\n\n  ul li::before,\n  ol li::before {\n    background: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iOCIgeT0iNyIgd2lkdGg9IjMiIGhlaWdodD0iMiIgcng9IjEiIGZpbGw9IiM0RTVDNkUiLz4KPHJlY3QgeD0iOCIgeT0iMTEiIHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHJ4PSIxIiBmaWxsPSIjNEU1QzZFIi8+CjxyZWN0IHg9IjgiIHk9IjE1IiB3aWR0aD0iMyIgaGVpZ2h0PSIyIiByeD0iMSIgZmlsbD0iIzRFNUM2RSIvPgo8cmVjdCB4PSIxMyIgeT0iNyIgd2lkdGg9IjMiIGhlaWdodD0iMiIgcng9IjEiIGZpbGw9IiM0RTVDNkUiLz4KPHJlY3QgeD0iMTMiIHk9IjExIiB3aWR0aD0iMyIgaGVpZ2h0PSIyIiByeD0iMSIgZmlsbD0iIzRFNUM2RSIvPgo8cmVjdCB4PSIxMyIgeT0iMTUiIHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHJ4PSIxIiBmaWxsPSIjNEU1QzZFIi8+Cjwvc3ZnPgo=\");\n    content: \"\";\n    display: ${props => props.readOnly ? \"none\" : \"inline-block\"};\n    cursor: move;\n    width: 24px;\n    height: 24px;\n    position: absolute;\n    ${props => props.rtl ? \"right\" : \"left\"}: -40px;\n    top: 2px;\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n  }\n\n  ul > li.hovering::before,\n  ol li.hovering::before {\n    opacity: 0.5;\n  }\n\n  ul li.ProseMirror-selectednode::after,\n  ol li.ProseMirror-selectednode::after {\n    display: none;\n  }\n\n  ul.checkbox_list li::before {\n    ${props => props.rtl ? \"right\" : \"left\"}: 0;\n  }\n\n  ul.checkbox_list li input {\n    pointer-events: ${props => props.readOnly && !props.readOnlyWriteCheckboxes ? \"none\" : \"initial\"};\n    opacity: ${props => props.readOnly && !props.readOnlyWriteCheckboxes ? 0.75 : 1};\n    margin: ${props => props.rtl ? \"0.5em 0 0 0.5em\" : \"0.5em 0.5em 0 0\"};\n    width: 14px;\n    height: 14px;\n  }\n\n  li p:first-child {\n    margin: 0;\n    word-break: break-word;\n  }\n\n  hr {\n    position: relative;\n    height: 1em;\n    border: 0;\n  }\n\n  hr:before {\n    content: \"\";\n    display: block;\n    position: absolute;\n    border-top: 1px solid ${props => props.theme.horizontalRule};\n    top: 0.5em;\n    left: 0;\n    right: 0;\n  }\n\n  hr.page-break {\n    page-break-after: always;\n  }\n\n  hr.page-break:before {\n    border-top: 1px dashed ${props => props.theme.horizontalRule};\n  }\n\n  code {\n    border-radius: 4px;\n    border: 1px solid ${props => props.theme.codeBorder};\n    padding: 3px 4px;\n    font-family: ${props => props.theme.fontFamilyMono};\n    font-size: 85%;\n  }\n\n  mark {\n    border-radius: 1px;\n    color: ${props => props.theme.textHighlightForeground};\n    background: ${props => props.theme.textHighlight};\n\n    a {\n      color: ${props => props.theme.textHighlightForeground};\n    }\n  }\n\n  .code-block,\n  .notice-block {\n    position: relative;\n\n    select,\n    button {\n      background: ${props => props.theme.blockToolbarBackground};\n      color: ${props => props.theme.blockToolbarItem};\n      border-width: 1px;\n      font-size: 13px;\n      display: none;\n      position: absolute;\n      border-radius: 4px;\n      padding: 2px;\n      z-index: 1;\n      top: 4px;\n    }\n\n    &.code-block {\n      select,\n      button {\n        right: 4px;\n      }\n    }\n\n    &.notice-block {\n      select,\n      button {\n        ${props => props.rtl ? \"left\" : \"right\"}: 4px;\n      }\n    }\n\n    button {\n      padding: 2px 4px;\n    }\n\n    &:hover {\n      select {\n        display: ${props => props.readOnly ? \"none\" : \"inline\"};\n      }\n\n      button {\n        display: ${props => props.readOnly ? \"inline\" : \"none\"};\n      }\n    }\n\n    select:focus,\n    select:active {\n      display: inline;\n    }\n  }\n\n  pre {\n    display: block;\n    overflow-x: auto;\n    padding: 0.75em 1em;\n    line-height: 1.4em;\n    position: relative;\n    background: ${props => props.theme.codeBackground};\n    border-radius: 4px;\n    border: 1px solid ${props => props.theme.codeBorder};\n\n    -webkit-font-smoothing: initial;\n    font-family: ${props => props.theme.fontFamilyMono};\n    font-size: 13px;\n    direction: ltr;\n    text-align: left;\n    white-space: pre;\n    word-spacing: normal;\n    word-break: normal;\n    -moz-tab-size: 4;\n    -o-tab-size: 4;\n    tab-size: 4;\n    -webkit-hyphens: none;\n    -moz-hyphens: none;\n    -ms-hyphens: none;\n    hyphens: none;\n    color: ${props => props.theme.code};\n    margin: 0;\n\n    code {\n      font-size: 13px;\n      background: none;\n      padding: 0;\n      border: 0;\n    }\n  }\n\n  .token.comment,\n  .token.prolog,\n  .token.doctype,\n  .token.cdata {\n    color: ${props => props.theme.codeComment};\n  }\n\n  .token.punctuation {\n    color: ${props => props.theme.codePunctuation};\n  }\n\n  .token.namespace {\n    opacity: 0.7;\n  }\n\n  .token.operator,\n  .token.boolean,\n  .token.number {\n    color: ${props => props.theme.codeNumber};\n  }\n\n  .token.property {\n    color: ${props => props.theme.codeProperty};\n  }\n\n  .token.tag {\n    color: ${props => props.theme.codeTag};\n  }\n\n  .token.string {\n    color: ${props => props.theme.codeString};\n  }\n\n  .token.selector {\n    color: ${props => props.theme.codeSelector};\n  }\n\n  .token.attr-name {\n    color: ${props => props.theme.codeAttr};\n  }\n\n  .token.entity,\n  .token.url,\n  .language-css .token.string,\n  .style .token.string {\n    color: ${props => props.theme.codeEntity};\n  }\n\n  .token.attr-value,\n  .token.keyword,\n  .token.control,\n  .token.directive,\n  .token.unit {\n    color: ${props => props.theme.codeKeyword};\n  }\n\n  .token.function {\n    color: ${props => props.theme.codeFunction};\n  }\n\n  .token.statement,\n  .token.regex,\n  .token.atrule {\n    color: ${props => props.theme.codeStatement};\n  }\n\n  .token.placeholder,\n  .token.variable {\n    color: ${props => props.theme.codePlaceholder};\n  }\n\n  .token.deleted {\n    text-decoration: line-through;\n  }\n\n  .token.inserted {\n    border-bottom: 1px dotted ${props => props.theme.codeInserted};\n    text-decoration: none;\n  }\n\n  .token.italic {\n    font-style: italic;\n  }\n\n  .token.important,\n  .token.bold {\n    font-weight: bold;\n  }\n\n  .token.important {\n    color: ${props => props.theme.codeImportant};\n  }\n\n  .token.entity {\n    cursor: help;\n  }\n\n  table {\n    width: 100%;\n    border-collapse: collapse;\n    border-radius: 4px;\n    margin-top: 1em;\n    box-sizing: border-box;\n\n    * {\n      box-sizing: border-box;\n    }\n\n    tr {\n      position: relative;\n      border-bottom: 1px solid ${props => props.theme.tableDivider};\n    }\n\n    th {\n      background: ${props => props.theme.tableHeaderBackground};\n    }\n\n    td,\n    th {\n      position: relative;\n      vertical-align: top;\n      border: 1px solid ${props => props.theme.tableDivider};\n      position: relative;\n      padding: 4px 8px;\n      text-align: ${props => props.rtl ? \"right\" : \"left\"};\n      min-width: 100px;\n    }\n\n    .selectedCell {\n      background: ${props => props.readOnly ? \"inherit\" : props.theme.tableSelectedBackground};\n\n      /* fixes Firefox background color painting over border:\n       * https://bugzilla.mozilla.org/show_bug.cgi?id=688556 */\n      background-clip: padding-box;\n    }\n\n    .grip-column {\n      /* usage of ::after for all of the table grips works around a bug in\n       * prosemirror-tables that causes Safari to hang when selecting a cell\n       * in an empty table:\n       * https://github.com/ProseMirror/prosemirror/issues/947 */\n      &::after {\n        content: \"\";\n        cursor: pointer;\n        position: absolute;\n        top: -16px;\n        ${props => props.rtl ? \"right\" : \"left\"}: 0;\n        width: 100%;\n        height: 12px;\n        background: ${props => props.theme.tableDivider};\n        border-bottom: 3px solid ${props => props.theme.background};\n        display: ${props => props.readOnly ? \"none\" : \"block\"};\n      }\n\n      &:hover::after {\n        background: ${props => props.theme.text};\n      }\n      &.first::after {\n        border-top-${props => props.rtl ? \"right\" : \"left\"}-radius: 3px;\n      }\n      &.last::after {\n        border-top-${props => props.rtl ? \"left\" : \"right\"}-radius: 3px;\n      }\n      &.selected::after {\n        background: ${props => props.theme.tableSelected};\n      }\n    }\n\n    .grip-row {\n      &::after {\n        content: \"\";\n        cursor: pointer;\n        position: absolute;\n        ${props => props.rtl ? \"right\" : \"left\"}: -16px;\n        top: 0;\n        height: 100%;\n        width: 12px;\n        background: ${props => props.theme.tableDivider};\n        border-${props => props.rtl ? \"left\" : \"right\"}: 3px solid;\n        border-color: ${props => props.theme.background};\n        display: ${props => props.readOnly ? \"none\" : \"block\"};\n      }\n\n      &:hover::after {\n        background: ${props => props.theme.text};\n      }\n      &.first::after {\n        border-top-${props => props.rtl ? \"right\" : \"left\"}-radius: 3px;\n      }\n      &.last::after {\n        border-bottom-${props => props.rtl ? \"right\" : \"left\"}-radius: 3px;\n      }\n      &.selected::after {\n        background: ${props => props.theme.tableSelected};\n      }\n    }\n\n    .grip-table {\n      &::after {\n        content: \"\";\n        cursor: pointer;\n        background: ${props => props.theme.tableDivider};\n        width: 13px;\n        height: 13px;\n        border-radius: 13px;\n        border: 2px solid ${props => props.theme.background};\n        position: absolute;\n        top: -18px;\n        ${props => props.rtl ? \"right\" : \"left\"}: -18px;\n        display: ${props => props.readOnly ? \"none\" : \"block\"};\n      }\n\n      &:hover::after {\n        background: ${props => props.theme.text};\n      }\n      &.selected::after {\n        background: ${props => props.theme.tableSelected};\n      }\n    }\n  }\n\n  .scrollable-wrapper {\n    position: relative;\n    margin: 0.5em 0px;\n    scrollbar-width: thin;\n    scrollbar-color: transparent transparent;\n\n    &:hover {\n      scrollbar-color: ${props => props.theme.scrollbarThumb}\n        ${props => props.theme.scrollbarBackground};\n    }\n\n    & ::-webkit-scrollbar {\n      height: 14px;\n      background-color: transparent;\n    }\n\n    &:hover ::-webkit-scrollbar {\n      background-color: ${props => props.theme.scrollbarBackground};\n    }\n\n    & ::-webkit-scrollbar-thumb {\n      background-color: transparent;\n      border: 3px solid transparent;\n      border-radius: 7px;\n    }\n\n    &:hover ::-webkit-scrollbar-thumb {\n      background-color: ${props => props.theme.scrollbarThumb};\n      border-color: ${props => props.theme.scrollbarBackground};\n    }\n  }\n\n  .scrollable {\n    overflow-y: hidden;\n    overflow-x: auto;\n    padding-${props => props.rtl ? \"right\" : \"left\"}: 1em;\n    margin-${props => props.rtl ? \"right\" : \"left\"}: -1em;\n    border-${props => props.rtl ? \"right\" : \"left\"}: 1px solid transparent;\n    border-${props => props.rtl ? \"left\" : \"right\"}: 1px solid transparent;\n    transition: border 250ms ease-in-out 0s;\n  }\n\n  .scrollable-shadow {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    ${props => props.rtl ? \"right\" : \"left\"}: -1em;\n    width: 16px;\n    transition: box-shadow 250ms ease-in-out;\n    border: 0px solid transparent;\n    border-${props => props.rtl ? \"right\" : \"left\"}-width: 1em;\n    pointer-events: none;\n\n    &.left {\n      box-shadow: 16px 0 16px -16px inset rgba(0, 0, 0, 0.25);\n      border-left: 1em solid ${props => props.theme.background};\n    }\n\n    &.right {\n      right: 0;\n      left: auto;\n      box-shadow: -16px 0 16px -16px inset rgba(0, 0, 0, 0.25);\n    }\n  }\n\n  .block-menu-trigger {\n    display: ${props => props.readOnly ? \"none\" : \"inline\"};\n    width: 24px;\n    height: 24px;\n    color: ${props => props.theme.textSecondary};\n    background: none;\n    position: absolute;\n    transition: color 150ms cubic-bezier(0.175, 0.885, 0.32, 1.275),\n      transform 150ms cubic-bezier(0.175, 0.885, 0.32, 1.275);\n    outline: none;\n    border: 0;\n    padding: 0;\n    margin-top: 1px;\n    margin-${props => props.rtl ? \"right\" : \"left\"}: -24px;\n\n    &:hover,\n    &:focus {\n      cursor: pointer;\n      transform: scale(1.2);\n      color: ${props => props.theme.text};\n    }\n  }\n\n  @media print {\n    .block-menu-trigger {\n      display: none;\n    }\n\n    .page-break {\n      opacity: 0;\n    }\n  }\n\n  .ProseMirror-gapcursor {\n    display: none;\n    pointer-events: none;\n    position: absolute;\n  }\n\n  .ProseMirror-gapcursor:after {\n    content: \"\";\n    display: block;\n    position: absolute;\n    top: -2px;\n    width: 20px;\n    border-top: 1px solid ${props => props.theme.cursor};\n    animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n  }\n\n  @keyframes ProseMirror-cursor-blink {\n    to {\n      visibility: hidden;\n    }\n  }\n\n  .ProseMirror-focused .ProseMirror-gapcursor {\n    display: block;\n  }\n\n  @media print {\n    em,\n    blockquote {\n      font-family: \"SF Pro Text\", ${props => props.theme.fontFamily};\n    }\n  }\n`;\nexports.default = RichMarkdownEditor;","map":{"version":3,"sources":["../src/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.theme = void 0;\nconst React = __importStar(require(\"react\"));\nconst memoize_1 = __importDefault(require(\"lodash/memoize\"));\nconst prosemirror_state_1 = require(\"prosemirror-state\");\nconst prosemirror_dropcursor_1 = require(\"prosemirror-dropcursor\");\nconst prosemirror_gapcursor_1 = require(\"prosemirror-gapcursor\");\nconst prosemirror_view_1 = require(\"prosemirror-view\");\nconst prosemirror_model_1 = require(\"prosemirror-model\");\nconst prosemirror_inputrules_1 = require(\"prosemirror-inputrules\");\nconst prosemirror_keymap_1 = require(\"prosemirror-keymap\");\nconst prosemirror_commands_1 = require(\"prosemirror-commands\");\nconst prosemirror_utils_1 = require(\"prosemirror-utils\");\nconst styled_components_1 = __importStar(require(\"styled-components\"));\nconst theme_1 = require(\"./theme\");\nconst dictionary_1 = __importDefault(require(\"./dictionary\"));\nconst Flex_1 = __importDefault(require(\"./components/Flex\"));\nconst SelectionToolbar_1 = __importDefault(require(\"./components/SelectionToolbar\"));\nconst BlockMenu_1 = __importDefault(require(\"./components/BlockMenu\"));\nconst LinkToolbar_1 = __importDefault(require(\"./components/LinkToolbar\"));\nconst Tooltip_1 = __importDefault(require(\"./components/Tooltip\"));\nconst ExtensionManager_1 = __importDefault(require(\"./lib/ExtensionManager\"));\nconst ComponentView_1 = __importDefault(require(\"./lib/ComponentView\"));\nconst headingToSlug_1 = __importDefault(require(\"./lib/headingToSlug\"));\nconst Doc_1 = __importDefault(require(\"./nodes/Doc\"));\nconst Text_1 = __importDefault(require(\"./nodes/Text\"));\nconst Blockquote_1 = __importDefault(require(\"./nodes/Blockquote\"));\nconst BulletList_1 = __importDefault(require(\"./nodes/BulletList\"));\nconst CodeBlock_1 = __importDefault(require(\"./nodes/CodeBlock\"));\nconst CodeFence_1 = __importDefault(require(\"./nodes/CodeFence\"));\nconst CheckboxList_1 = __importDefault(require(\"./nodes/CheckboxList\"));\nconst CheckboxItem_1 = __importDefault(require(\"./nodes/CheckboxItem\"));\nconst Embed_1 = __importDefault(require(\"./nodes/Embed\"));\nconst HardBreak_1 = __importDefault(require(\"./nodes/HardBreak\"));\nconst Heading_1 = __importDefault(require(\"./nodes/Heading\"));\nconst HorizontalRule_1 = __importDefault(require(\"./nodes/HorizontalRule\"));\nconst Image_1 = __importDefault(require(\"./nodes/Image\"));\nconst ListItem_1 = __importDefault(require(\"./nodes/ListItem\"));\nconst Notice_1 = __importDefault(require(\"./nodes/Notice\"));\nconst OrderedList_1 = __importDefault(require(\"./nodes/OrderedList\"));\nconst Paragraph_1 = __importDefault(require(\"./nodes/Paragraph\"));\nconst Table_1 = __importDefault(require(\"./nodes/Table\"));\nconst TableCell_1 = __importDefault(require(\"./nodes/TableCell\"));\nconst TableHeadCell_1 = __importDefault(require(\"./nodes/TableHeadCell\"));\nconst TableRow_1 = __importDefault(require(\"./nodes/TableRow\"));\nconst Bold_1 = __importDefault(require(\"./marks/Bold\"));\nconst Code_1 = __importDefault(require(\"./marks/Code\"));\nconst Highlight_1 = __importDefault(require(\"./marks/Highlight\"));\nconst Italic_1 = __importDefault(require(\"./marks/Italic\"));\nconst Link_1 = __importDefault(require(\"./marks/Link\"));\nconst Strikethrough_1 = __importDefault(require(\"./marks/Strikethrough\"));\nconst Placeholder_1 = __importDefault(require(\"./marks/Placeholder\"));\nconst Underline_1 = __importDefault(require(\"./marks/Underline\"));\nconst BlockMenuTrigger_1 = __importDefault(require(\"./plugins/BlockMenuTrigger\"));\nconst History_1 = __importDefault(require(\"./plugins/History\"));\nconst Keys_1 = __importDefault(require(\"./plugins/Keys\"));\nconst MaxLength_1 = __importDefault(require(\"./plugins/MaxLength\"));\nconst Placeholder_2 = __importDefault(require(\"./plugins/Placeholder\"));\nconst SmartText_1 = __importDefault(require(\"./plugins/SmartText\"));\nconst TrailingNode_1 = __importDefault(require(\"./plugins/TrailingNode\"));\nconst MarkdownPaste_1 = __importDefault(require(\"./plugins/MarkdownPaste\"));\nvar server_1 = require(\"./server\");\nObject.defineProperty(exports, \"schema\", { enumerable: true, get: function () { return server_1.schema; } });\nObject.defineProperty(exports, \"parser\", { enumerable: true, get: function () { return server_1.parser; } });\nObject.defineProperty(exports, \"serializer\", { enumerable: true, get: function () { return server_1.serializer; } });\nObject.defineProperty(exports, \"renderToHtml\", { enumerable: true, get: function () { return server_1.renderToHtml; } });\nvar Extension_1 = require(\"./lib/Extension\");\nObject.defineProperty(exports, \"Extension\", { enumerable: true, get: function () { return Extension_1.default; } });\nexports.theme = theme_1.light;\nclass RichMarkdownEditor extends React.PureComponent {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            isRTL: false,\n            isEditorFocused: false,\n            selectionMenuOpen: false,\n            blockMenuOpen: false,\n            linkMenuOpen: false,\n            blockMenuSearch: \"\",\n        };\n        this.calculateDir = () => {\n            if (!this.element)\n                return;\n            const isRTL = this.props.dir === \"rtl\" ||\n                getComputedStyle(this.element).direction === \"rtl\";\n            if (this.state.isRTL !== isRTL) {\n                this.setState({ isRTL });\n            }\n        };\n        this.value = () => {\n            return this.serializer.serialize(this.view.state.doc);\n        };\n        this.handleChange = () => {\n            if (!this.props.onChange)\n                return;\n            this.props.onChange(() => {\n                return this.value();\n            });\n        };\n        this.handleSave = () => {\n            const { onSave } = this.props;\n            if (onSave) {\n                onSave({ done: false });\n            }\n        };\n        this.handleSaveAndExit = () => {\n            const { onSave } = this.props;\n            if (onSave) {\n                onSave({ done: true });\n            }\n        };\n        this.handleEditorBlur = () => {\n            this.setState({ isEditorFocused: false });\n        };\n        this.handleEditorFocus = () => {\n            this.setState({ isEditorFocused: true });\n        };\n        this.handleOpenSelectionMenu = () => {\n            this.setState({ blockMenuOpen: false, selectionMenuOpen: true });\n        };\n        this.handleCloseSelectionMenu = () => {\n            this.setState({ selectionMenuOpen: false });\n        };\n        this.handleOpenLinkMenu = () => {\n            this.setState({ blockMenuOpen: false, linkMenuOpen: true });\n        };\n        this.handleCloseLinkMenu = () => {\n            this.setState({ linkMenuOpen: false });\n        };\n        this.handleOpenBlockMenu = (search) => {\n            this.setState({ blockMenuOpen: true, blockMenuSearch: search });\n        };\n        this.handleCloseBlockMenu = () => {\n            if (!this.state.blockMenuOpen)\n                return;\n            this.setState({ blockMenuOpen: false });\n        };\n        this.handleSelectRow = (index, state) => {\n            this.view.dispatch(prosemirror_utils_1.selectRow(index)(state.tr));\n        };\n        this.handleSelectColumn = (index, state) => {\n            this.view.dispatch(prosemirror_utils_1.selectColumn(index)(state.tr));\n        };\n        this.handleSelectTable = (state) => {\n            this.view.dispatch(prosemirror_utils_1.selectTable(state.tr));\n        };\n        this.focusAtStart = () => {\n            const selection = prosemirror_state_1.Selection.atStart(this.view.state.doc);\n            const transaction = this.view.state.tr.setSelection(selection);\n            this.view.dispatch(transaction);\n            this.view.focus();\n        };\n        this.focusAtEnd = () => {\n            const selection = prosemirror_state_1.Selection.atEnd(this.view.state.doc);\n            const transaction = this.view.state.tr.setSelection(selection);\n            this.view.dispatch(transaction);\n            this.view.focus();\n        };\n        this.getHeadings = () => {\n            const headings = [];\n            const previouslySeen = {};\n            this.view.state.doc.forEach(node => {\n                if (node.type.name === \"heading\") {\n                    const slug = headingToSlug_1.default(node);\n                    let id = slug;\n                    if (previouslySeen[slug] > 0) {\n                        id = headingToSlug_1.default(node, previouslySeen[slug]);\n                    }\n                    previouslySeen[slug] =\n                        previouslySeen[slug] !== undefined ? previouslySeen[slug] + 1 : 1;\n                    headings.push({\n                        title: node.textContent,\n                        level: node.attrs.level,\n                        id,\n                    });\n                }\n            });\n            return headings;\n        };\n        this.theme = () => {\n            return this.props.theme || (this.props.dark ? theme_1.dark : theme_1.light);\n        };\n        this.dictionary = memoize_1.default((providedDictionary) => {\n            return Object.assign(Object.assign({}, dictionary_1.default), providedDictionary);\n        });\n        this.render = () => {\n            const { dir, readOnly, readOnlyWriteCheckboxes, style, tooltip, className, onKeyDown, } = this.props;\n            const { isRTL } = this.state;\n            const dictionary = this.dictionary(this.props.dictionary);\n            return (React.createElement(Flex_1.default, { onKeyDown: onKeyDown, style: style, className: className, align: \"flex-start\", justify: \"center\", dir: dir, column: true },\n                React.createElement(styled_components_1.ThemeProvider, { theme: this.theme() },\n                    React.createElement(React.Fragment, null,\n                        React.createElement(StyledEditor, { dir: dir, rtl: isRTL, readOnly: readOnly, readOnlyWriteCheckboxes: readOnlyWriteCheckboxes, ref: ref => (this.element = ref) }),\n                        !readOnly && this.view && (React.createElement(React.Fragment, null,\n                            React.createElement(SelectionToolbar_1.default, { view: this.view, dictionary: dictionary, commands: this.commands, rtl: isRTL, isTemplate: this.props.template === true, onOpen: this.handleOpenSelectionMenu, onClose: this.handleCloseSelectionMenu, onSearchLink: this.props.onSearchLink, onClickLink: this.props.onClickLink, onCreateLink: this.props.onCreateLink, tooltip: tooltip }),\n                            React.createElement(LinkToolbar_1.default, { view: this.view, dictionary: dictionary, isActive: this.state.linkMenuOpen, onCreateLink: this.props.onCreateLink, onSearchLink: this.props.onSearchLink, onClickLink: this.props.onClickLink, onShowToast: this.props.onShowToast, onClose: this.handleCloseLinkMenu, tooltip: tooltip }),\n                            React.createElement(BlockMenu_1.default, { view: this.view, commands: this.commands, dictionary: dictionary, rtl: isRTL, isActive: this.state.blockMenuOpen, search: this.state.blockMenuSearch, onClose: this.handleCloseBlockMenu, uploadImage: this.props.uploadImage, onLinkToolbarOpen: this.handleOpenLinkMenu, onImageUploadStart: this.props.onImageUploadStart, onImageUploadStop: this.props.onImageUploadStop, onShowToast: this.props.onShowToast, embeds: this.props.embeds })))))));\n        };\n    }\n    componentDidMount() {\n        this.init();\n        if (this.props.scrollTo) {\n            this.scrollToAnchor(this.props.scrollTo);\n        }\n        this.calculateDir();\n        if (this.props.readOnly)\n            return;\n        if (this.props.autoFocus) {\n            this.focusAtEnd();\n        }\n    }\n    componentDidUpdate(prevProps) {\n        if (this.props.value && prevProps.value !== this.props.value) {\n            const newState = this.createState(this.props.value);\n            this.view.updateState(newState);\n        }\n        if (prevProps.readOnly !== this.props.readOnly) {\n            this.view.update(Object.assign(Object.assign({}, this.view.props), { editable: () => !this.props.readOnly }));\n        }\n        if (this.props.scrollTo && this.props.scrollTo !== prevProps.scrollTo) {\n            this.scrollToAnchor(this.props.scrollTo);\n        }\n        if (prevProps.readOnly && !this.props.readOnly && this.props.autoFocus) {\n            this.focusAtEnd();\n        }\n        if (prevProps.dir !== this.props.dir) {\n            this.calculateDir();\n        }\n        if (!this.isBlurred &&\n            !this.state.isEditorFocused &&\n            !this.state.blockMenuOpen &&\n            !this.state.linkMenuOpen &&\n            !this.state.selectionMenuOpen) {\n            this.isBlurred = true;\n            if (this.props.onBlur) {\n                this.props.onBlur();\n            }\n        }\n        if (this.isBlurred &&\n            (this.state.isEditorFocused ||\n                this.state.blockMenuOpen ||\n                this.state.linkMenuOpen ||\n                this.state.selectionMenuOpen)) {\n            this.isBlurred = false;\n            if (this.props.onFocus) {\n                this.props.onFocus();\n            }\n        }\n    }\n    init() {\n        this.extensions = this.createExtensions();\n        this.nodes = this.createNodes();\n        this.marks = this.createMarks();\n        this.schema = this.createSchema();\n        this.plugins = this.createPlugins();\n        this.keymaps = this.createKeymaps();\n        this.serializer = this.createSerializer();\n        this.parser = this.createParser();\n        this.inputRules = this.createInputRules();\n        this.nodeViews = this.createNodeViews();\n        this.view = this.createView();\n        this.commands = this.createCommands();\n    }\n    createExtensions() {\n        const dictionary = this.dictionary(this.props.dictionary);\n        return new ExtensionManager_1.default([\n            ...[\n                new Doc_1.default(),\n                new Text_1.default(),\n                new HardBreak_1.default(),\n                new Paragraph_1.default(),\n                new Blockquote_1.default(),\n                new CodeBlock_1.default({\n                    dictionary,\n                    onShowToast: this.props.onShowToast,\n                }),\n                new CodeFence_1.default({\n                    dictionary,\n                    onShowToast: this.props.onShowToast,\n                }),\n                new CheckboxList_1.default(),\n                new CheckboxItem_1.default(),\n                new BulletList_1.default(),\n                new Embed_1.default(),\n                new ListItem_1.default(),\n                new Notice_1.default({\n                    dictionary,\n                }),\n                new Heading_1.default({\n                    dictionary,\n                    onShowToast: this.props.onShowToast,\n                    offset: this.props.headingsOffset,\n                }),\n                new HorizontalRule_1.default(),\n                new Image_1.default({\n                    dictionary,\n                    uploadImage: this.props.uploadImage,\n                    onImageUploadStart: this.props.onImageUploadStart,\n                    onImageUploadStop: this.props.onImageUploadStop,\n                    onShowToast: this.props.onShowToast,\n                }),\n                new Table_1.default(),\n                new TableCell_1.default({\n                    onSelectTable: this.handleSelectTable,\n                    onSelectRow: this.handleSelectRow,\n                }),\n                new TableHeadCell_1.default({\n                    onSelectColumn: this.handleSelectColumn,\n                }),\n                new TableRow_1.default(),\n                new Bold_1.default(),\n                new Code_1.default(),\n                new Highlight_1.default(),\n                new Italic_1.default(),\n                new Placeholder_1.default(),\n                new Underline_1.default(),\n                new Link_1.default({\n                    onKeyboardShortcut: this.handleOpenLinkMenu,\n                    onClickLink: this.props.onClickLink,\n                    onClickHashtag: this.props.onClickHashtag,\n                    onHoverLink: this.props.onHoverLink,\n                }),\n                new Strikethrough_1.default(),\n                new OrderedList_1.default(),\n                new History_1.default(),\n                new SmartText_1.default(),\n                new TrailingNode_1.default(),\n                new MarkdownPaste_1.default(),\n                new Keys_1.default({\n                    onBlur: this.handleEditorBlur,\n                    onFocus: this.handleEditorFocus,\n                    onSave: this.handleSave,\n                    onSaveAndExit: this.handleSaveAndExit,\n                    onCancel: this.props.onCancel,\n                }),\n                new BlockMenuTrigger_1.default({\n                    dictionary,\n                    onOpen: this.handleOpenBlockMenu,\n                    onClose: this.handleCloseBlockMenu,\n                }),\n                new Placeholder_2.default({\n                    placeholder: this.props.placeholder,\n                }),\n                new MaxLength_1.default({\n                    maxLength: this.props.maxLength,\n                }),\n            ].filter(extension => {\n                if (this.props.disableExtensions) {\n                    return !this.props.disableExtensions.includes(extension.name);\n                }\n                return true;\n            }),\n            ...this.props.extensions,\n        ], this);\n    }\n    createPlugins() {\n        return this.extensions.plugins;\n    }\n    createKeymaps() {\n        return this.extensions.keymaps({\n            schema: this.schema,\n        });\n    }\n    createInputRules() {\n        return this.extensions.inputRules({\n            schema: this.schema,\n        });\n    }\n    createNodeViews() {\n        return this.extensions.extensions\n            .filter((extension) => extension.component)\n            .reduce((nodeViews, extension) => {\n            const nodeView = (node, view, getPos, decorations) => {\n                return new ComponentView_1.default(extension.component, {\n                    editor: this,\n                    extension,\n                    node,\n                    view,\n                    getPos,\n                    decorations,\n                });\n            };\n            return Object.assign(Object.assign({}, nodeViews), { [extension.name]: nodeView });\n        }, {});\n    }\n    createCommands() {\n        return this.extensions.commands({\n            schema: this.schema,\n            view: this.view,\n        });\n    }\n    createNodes() {\n        return this.extensions.nodes;\n    }\n    createMarks() {\n        return this.extensions.marks;\n    }\n    createSchema() {\n        return new prosemirror_model_1.Schema({\n            nodes: this.nodes,\n            marks: this.marks,\n        });\n    }\n    createSerializer() {\n        return this.extensions.serializer();\n    }\n    createParser() {\n        return this.extensions.parser({\n            schema: this.schema,\n        });\n    }\n    createState(value) {\n        const doc = this.createDocument(value || this.props.defaultValue);\n        return prosemirror_state_1.EditorState.create({\n            schema: this.schema,\n            doc,\n            plugins: [\n                ...this.plugins,\n                ...this.keymaps,\n                prosemirror_dropcursor_1.dropCursor({ color: this.theme().cursor }),\n                prosemirror_gapcursor_1.gapCursor(),\n                prosemirror_inputrules_1.inputRules({\n                    rules: this.inputRules,\n                }),\n                prosemirror_keymap_1.keymap(prosemirror_commands_1.baseKeymap),\n            ],\n        });\n    }\n    createDocument(content) {\n        return this.parser.parse(content);\n    }\n    createView() {\n        if (!this.element) {\n            throw new Error(\"createView called before ref available\");\n        }\n        const isEditingCheckbox = tr => {\n            return tr.steps.some((step) => {\n                var _a, _b, _c;\n                return ((_c = (_b = (_a = step.slice) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.firstChild) === null || _c === void 0 ? void 0 : _c.type.name) ===\n                    this.schema.nodes.checkbox_item.name;\n            });\n        };\n        const view = new prosemirror_view_1.EditorView(this.element, {\n            state: this.createState(),\n            editable: () => !this.props.readOnly,\n            nodeViews: this.nodeViews,\n            handleDOMEvents: this.props.handleDOMEvents,\n            dispatchTransaction: transaction => {\n                const { state, transactions } = this.view.state.applyTransaction(transaction);\n                this.view.updateState(state);\n                if (transactions.some(tr => tr.docChanged) &&\n                    (!this.props.readOnly ||\n                        (this.props.readOnlyWriteCheckboxes &&\n                            transactions.some(isEditingCheckbox)))) {\n                    this.handleChange();\n                }\n                this.calculateDir();\n                this.forceUpdate();\n            },\n        });\n        view.dom.setAttribute(\"role\", \"textbox\");\n        return view;\n    }\n    scrollToAnchor(hash) {\n        if (!hash)\n            return;\n        try {\n            const element = document.querySelector(hash);\n            if (element)\n                element.scrollIntoView({ behavior: \"smooth\" });\n        }\n        catch (err) {\n            console.warn(`Attempted to scroll to invalid hash: ${hash}`, err);\n        }\n    }\n}\nRichMarkdownEditor.defaultProps = {\n    defaultValue: \"\",\n    dir: \"auto\",\n    placeholder: \"Write something nice…\",\n    onImageUploadStart: () => {\n    },\n    onImageUploadStop: () => {\n    },\n    onClickLink: href => {\n        window.open(href, \"_blank\");\n    },\n    embeds: [],\n    extensions: [],\n    tooltip: Tooltip_1.default,\n};\nconst StyledEditor = styled_components_1.default(\"div\") `\n  color: ${props => props.theme.text};\n  background: ${props => props.theme.background};\n  font-family: ${props => props.theme.fontFamily};\n  font-weight: ${props => props.theme.fontWeight};\n  font-size: 1em;\n  line-height: 1.7em;\n  width: 100%;\n  .ProseMirror {\n    position: relative;\n    outline: none;\n    word-wrap: break-word;\n    white-space: pre-wrap;\n    white-space: break-spaces;\n    -webkit-font-variant-ligatures: none;\n    font-variant-ligatures: none;\n    font-feature-settings: \"liga\" 0; /* the above doesn't seem to work in Edge */\n  }\n\n  pre {\n    white-space: pre-wrap;\n  }\n\n  li {\n    position: relative;\n  }\n\n  .image {\n    text-align: center;\n    max-width: 100%;\n    clear: both;\n\n    img {\n      pointer-events: ${props => (props.readOnly ? \"initial\" : \"none\")};\n      display: inline-block;\n      max-width: 100%;\n      max-height: 75vh;\n    }\n  }\n\n  .image.placeholder {\n    position: relative;\n    background: ${props => props.theme.background};\n    margin-bottom: calc(28px + 1.2em);\n\n    img {\n      opacity: 0.5;\n    }\n  }\n\n  .image-right-50 {\n    float: right;\n    width: 50%;\n    margin-left: 2em;\n    margin-bottom: 1em;\n    clear: initial;\n  }\n\n  .image-left-50 {\n    float: left;\n    width: 50%;\n    margin-right: 2em;\n    margin-bottom: 1em;\n    clear: initial;\n  }\n\n  .ProseMirror-hideselection *::selection {\n    background: transparent;\n  }\n  .ProseMirror-hideselection *::-moz-selection {\n    background: transparent;\n  }\n  .ProseMirror-hideselection {\n    caret-color: transparent;\n  }\n\n  .ProseMirror-selectednode {\n    outline: 2px solid\n      ${props => (props.readOnly ? \"transparent\" : props.theme.selected)};\n  }\n\n  /* Make sure li selections wrap around markers */\n\n  li.ProseMirror-selectednode {\n    outline: none;\n  }\n\n  li.ProseMirror-selectednode:after {\n    content: \"\";\n    position: absolute;\n    left: ${props => (props.rtl ? \"-2px\" : \"-32px\")};\n    right: ${props => (props.rtl ? \"-32px\" : \"-2px\")};\n    top: -2px;\n    bottom: -2px;\n    border: 2px solid ${props => props.theme.selected};\n    pointer-events: none;\n  }\n\n  .ProseMirror[contenteditable=\"false\"] {\n    .caption {\n      pointer-events: none;\n    }\n    .caption:empty {\n      visibility: hidden;\n    }\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin: 1em 0 0.5em;\n    font-weight: 500;\n    cursor: default;\n\n    &:not(.placeholder):before {\n      display: ${props => (props.readOnly ? \"none\" : \"inline-block\")};\n      font-family: ${props => props.theme.fontFamilyMono};\n      color: ${props => props.theme.textSecondary};\n      font-size: 13px;\n      line-height: 0;\n      margin-${props => (props.rtl ? \"right\" : \"left\")}: -24px;\n      width: 24px;\n    }\n\n    &:hover {\n      .heading-anchor {\n        opacity: 1;\n      }\n    }\n  }\n  .heading-content {\n    &:before {\n      content: \"​\";\n      display: inline;\n    }\n  }\n  .heading-name {\n    color: ${props => props.theme.text};\n\n    &:hover {\n      text-decoration: none;\n    }\n  }\n\n  a:first-child {\n    h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n      margin-top: 0;\n    }\n  }\n\n  h1:not(.placeholder):before {\n    content: \"H1\";\n  }\n  h2:not(.placeholder):before {\n    content: \"H2\";\n  }\n  h3:not(.placeholder):before {\n    content: \"H3\";\n  }\n  h4:not(.placeholder):before {\n    content: \"H4\";\n  }\n  h5:not(.placeholder):before {\n    content: \"H5\";\n  }\n  h6:not(.placeholder):before {\n    content: \"H6\";\n  }\n\n  .with-emoji {\n    margin-${props => (props.rtl ? \"right\" : \"left\")}: -1em;\n  }\n\n  .heading-anchor {\n    opacity: 0;\n    display: ${props => (props.readOnly ? \"inline-block\" : \"none\")};\n    color: ${props => props.theme.textSecondary};\n    cursor: pointer;\n    background: none;\n    border: 0;\n    outline: none;\n    padding: ${props => (props.rtl ? \"2px 2px 12px 4px\" : \"2px 12px 2px 4px\")};\n    margin: 0;\n    transition: opacity 100ms ease-in-out;\n    font-family: ${props => props.theme.fontFamilyMono};\n    font-size: 22px;\n    line-height: 0;\n    margin-${props => (props.rtl ? \"right\" : \"left\")}: -24px;\n    width: 24px;\n\n    &:focus,\n    &:hover {\n      color: ${props => props.theme.text};\n    }\n  }\n\n  .placeholder {\n    &:before {\n      display: block;\n      content: ${props => (props.readOnly ? \"\" : \"attr(data-empty-text)\")};\n      pointer-events: none;\n      height: 0;\n      color: ${props => props.theme.placeholder};\n    }\n  }\n\n  @media print {\n    .placeholder {\n      display: none;\n    }\n  }\n\n  .notice-block {\n    display: flex;\n    align-items: center;\n    background: ${props => props.theme.noticeInfoBackground};\n    color: ${props => props.theme.noticeInfoText};\n    border-radius: 4px;\n    padding: 8px 16px;\n    margin: 8px 0;\n\n    a {\n      color: ${props => props.theme.noticeInfoText};\n    }\n\n    a:not(.heading-name) {\n      text-decoration: underline;\n    }\n  }\n\n  .notice-block .content {\n    flex-grow: 1;\n  }\n\n  .notice-block .icon {\n    width: 24px;\n    height: 24px;\n    align-self: flex-start;\n    margin-${props => (props.rtl ? \"left\" : \"right\")}: 4px;\n    position: relative;\n    top: 1px;\n  }\n\n  .notice-block.tip {\n    background: ${props => props.theme.noticeTipBackground};\n    color: ${props => props.theme.noticeTipText};\n\n    a {\n      color: ${props => props.theme.noticeTipText};\n    }\n  }\n\n  .notice-block.warning {\n    background: ${props => props.theme.noticeWarningBackground};\n    color: ${props => props.theme.noticeWarningText};\n\n    a {\n      color: ${props => props.theme.noticeWarningText};\n    }\n  }\n\n  blockquote {\n    margin: 0;\n    padding-left: 1em;\n    font-style: italic;\n    overflow: hidden;\n    position: relative;\n\n    &:before {\n      content: \"\";\n      display: inline-block;\n      width: 3px;\n      border-radius: 1px;\n      position: absolute;\n      margin-${props => (props.rtl ? \"right\" : \"left\")}: -16px;\n      top: 0;\n      bottom: 0;\n      background: ${props => props.theme.quote};\n    }\n  }\n\n  b,\n  strong {\n    font-weight: 600;\n  }\n\n  .template-placeholder {\n    color: ${props => props.theme.placeholder};\n    border-bottom: 1px dotted ${props => props.theme.placeholder};\n    border-radius: 2px;\n    cursor: text;\n\n    &:hover {\n      border-bottom: 1px dotted\n        ${props => props.readOnly ? props.theme.placeholder : props.theme.textSecondary};\n    }\n  }\n\n  p {\n    margin: 0;\n  }\n\n  a {\n    color: ${props => props.theme.link};\n  }\n\n  a:hover {\n    text-decoration: ${props => (props.readOnly ? \"underline\" : \"none\")};\n  }\n\n  ul,\n  ol {\n    margin: ${props => (props.rtl ? \"0 -26px 0 0.1em\" : \"0 0.1em 0 -26px\")};\n    padding: ${props => (props.rtl ? \"0 44px 0 0\" : \"0 0 0 44px\")};\n\n    ul,\n    ol {\n      margin-${props => (props.rtl ? \"left\" : \"right\")}: -24px;\n    }\n  }\n\n  ol ol {\n    list-style: lower-alpha;\n  }\n\n  ol ol ol {\n    list-style: lower-roman;\n  }\n\n  ul.checkbox_list {\n    list-style: none;\n    padding: 0;\n    margin: ${props => (props.rtl ? \"0 -24px 0 0\" : \"0 0 0 -24px\")};\n  }\n\n  ul li,\n  ol li {\n    position: relative;\n    white-space: initial;\n\n    p {\n      white-space: pre-wrap;\n    }\n\n    > div {\n      width: 100%;\n    }\n  }\n\n  ul.checkbox_list li {\n    display: flex;\n    padding-${props => (props.rtl ? \"right\" : \"left\")}: 24px;\n  }\n\n  ul.checkbox_list li.checked > div > p {\n    color: ${props => props.theme.textSecondary};\n    text-decoration: line-through;\n  }\n\n  ul li::before,\n  ol li::before {\n    background: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iOCIgeT0iNyIgd2lkdGg9IjMiIGhlaWdodD0iMiIgcng9IjEiIGZpbGw9IiM0RTVDNkUiLz4KPHJlY3QgeD0iOCIgeT0iMTEiIHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHJ4PSIxIiBmaWxsPSIjNEU1QzZFIi8+CjxyZWN0IHg9IjgiIHk9IjE1IiB3aWR0aD0iMyIgaGVpZ2h0PSIyIiByeD0iMSIgZmlsbD0iIzRFNUM2RSIvPgo8cmVjdCB4PSIxMyIgeT0iNyIgd2lkdGg9IjMiIGhlaWdodD0iMiIgcng9IjEiIGZpbGw9IiM0RTVDNkUiLz4KPHJlY3QgeD0iMTMiIHk9IjExIiB3aWR0aD0iMyIgaGVpZ2h0PSIyIiByeD0iMSIgZmlsbD0iIzRFNUM2RSIvPgo8cmVjdCB4PSIxMyIgeT0iMTUiIHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHJ4PSIxIiBmaWxsPSIjNEU1QzZFIi8+Cjwvc3ZnPgo=\");\n    content: \"\";\n    display: ${props => (props.readOnly ? \"none\" : \"inline-block\")};\n    cursor: move;\n    width: 24px;\n    height: 24px;\n    position: absolute;\n    ${props => (props.rtl ? \"right\" : \"left\")}: -40px;\n    top: 2px;\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n  }\n\n  ul > li.hovering::before,\n  ol li.hovering::before {\n    opacity: 0.5;\n  }\n\n  ul li.ProseMirror-selectednode::after,\n  ol li.ProseMirror-selectednode::after {\n    display: none;\n  }\n\n  ul.checkbox_list li::before {\n    ${props => (props.rtl ? \"right\" : \"left\")}: 0;\n  }\n\n  ul.checkbox_list li input {\n    pointer-events: ${props => props.readOnly && !props.readOnlyWriteCheckboxes ? \"none\" : \"initial\"};\n    opacity: ${props => props.readOnly && !props.readOnlyWriteCheckboxes ? 0.75 : 1};\n    margin: ${props => (props.rtl ? \"0.5em 0 0 0.5em\" : \"0.5em 0.5em 0 0\")};\n    width: 14px;\n    height: 14px;\n  }\n\n  li p:first-child {\n    margin: 0;\n    word-break: break-word;\n  }\n\n  hr {\n    position: relative;\n    height: 1em;\n    border: 0;\n  }\n\n  hr:before {\n    content: \"\";\n    display: block;\n    position: absolute;\n    border-top: 1px solid ${props => props.theme.horizontalRule};\n    top: 0.5em;\n    left: 0;\n    right: 0;\n  }\n\n  hr.page-break {\n    page-break-after: always;\n  }\n\n  hr.page-break:before {\n    border-top: 1px dashed ${props => props.theme.horizontalRule};\n  }\n\n  code {\n    border-radius: 4px;\n    border: 1px solid ${props => props.theme.codeBorder};\n    padding: 3px 4px;\n    font-family: ${props => props.theme.fontFamilyMono};\n    font-size: 85%;\n  }\n\n  mark {\n    border-radius: 1px;\n    color: ${props => props.theme.textHighlightForeground};\n    background: ${props => props.theme.textHighlight};\n\n    a {\n      color: ${props => props.theme.textHighlightForeground};\n    }\n  }\n\n  .code-block,\n  .notice-block {\n    position: relative;\n\n    select,\n    button {\n      background: ${props => props.theme.blockToolbarBackground};\n      color: ${props => props.theme.blockToolbarItem};\n      border-width: 1px;\n      font-size: 13px;\n      display: none;\n      position: absolute;\n      border-radius: 4px;\n      padding: 2px;\n      z-index: 1;\n      top: 4px;\n    }\n\n    &.code-block {\n      select,\n      button {\n        right: 4px;\n      }\n    }\n\n    &.notice-block {\n      select,\n      button {\n        ${props => (props.rtl ? \"left\" : \"right\")}: 4px;\n      }\n    }\n\n    button {\n      padding: 2px 4px;\n    }\n\n    &:hover {\n      select {\n        display: ${props => (props.readOnly ? \"none\" : \"inline\")};\n      }\n\n      button {\n        display: ${props => (props.readOnly ? \"inline\" : \"none\")};\n      }\n    }\n\n    select:focus,\n    select:active {\n      display: inline;\n    }\n  }\n\n  pre {\n    display: block;\n    overflow-x: auto;\n    padding: 0.75em 1em;\n    line-height: 1.4em;\n    position: relative;\n    background: ${props => props.theme.codeBackground};\n    border-radius: 4px;\n    border: 1px solid ${props => props.theme.codeBorder};\n\n    -webkit-font-smoothing: initial;\n    font-family: ${props => props.theme.fontFamilyMono};\n    font-size: 13px;\n    direction: ltr;\n    text-align: left;\n    white-space: pre;\n    word-spacing: normal;\n    word-break: normal;\n    -moz-tab-size: 4;\n    -o-tab-size: 4;\n    tab-size: 4;\n    -webkit-hyphens: none;\n    -moz-hyphens: none;\n    -ms-hyphens: none;\n    hyphens: none;\n    color: ${props => props.theme.code};\n    margin: 0;\n\n    code {\n      font-size: 13px;\n      background: none;\n      padding: 0;\n      border: 0;\n    }\n  }\n\n  .token.comment,\n  .token.prolog,\n  .token.doctype,\n  .token.cdata {\n    color: ${props => props.theme.codeComment};\n  }\n\n  .token.punctuation {\n    color: ${props => props.theme.codePunctuation};\n  }\n\n  .token.namespace {\n    opacity: 0.7;\n  }\n\n  .token.operator,\n  .token.boolean,\n  .token.number {\n    color: ${props => props.theme.codeNumber};\n  }\n\n  .token.property {\n    color: ${props => props.theme.codeProperty};\n  }\n\n  .token.tag {\n    color: ${props => props.theme.codeTag};\n  }\n\n  .token.string {\n    color: ${props => props.theme.codeString};\n  }\n\n  .token.selector {\n    color: ${props => props.theme.codeSelector};\n  }\n\n  .token.attr-name {\n    color: ${props => props.theme.codeAttr};\n  }\n\n  .token.entity,\n  .token.url,\n  .language-css .token.string,\n  .style .token.string {\n    color: ${props => props.theme.codeEntity};\n  }\n\n  .token.attr-value,\n  .token.keyword,\n  .token.control,\n  .token.directive,\n  .token.unit {\n    color: ${props => props.theme.codeKeyword};\n  }\n\n  .token.function {\n    color: ${props => props.theme.codeFunction};\n  }\n\n  .token.statement,\n  .token.regex,\n  .token.atrule {\n    color: ${props => props.theme.codeStatement};\n  }\n\n  .token.placeholder,\n  .token.variable {\n    color: ${props => props.theme.codePlaceholder};\n  }\n\n  .token.deleted {\n    text-decoration: line-through;\n  }\n\n  .token.inserted {\n    border-bottom: 1px dotted ${props => props.theme.codeInserted};\n    text-decoration: none;\n  }\n\n  .token.italic {\n    font-style: italic;\n  }\n\n  .token.important,\n  .token.bold {\n    font-weight: bold;\n  }\n\n  .token.important {\n    color: ${props => props.theme.codeImportant};\n  }\n\n  .token.entity {\n    cursor: help;\n  }\n\n  table {\n    width: 100%;\n    border-collapse: collapse;\n    border-radius: 4px;\n    margin-top: 1em;\n    box-sizing: border-box;\n\n    * {\n      box-sizing: border-box;\n    }\n\n    tr {\n      position: relative;\n      border-bottom: 1px solid ${props => props.theme.tableDivider};\n    }\n\n    th {\n      background: ${props => props.theme.tableHeaderBackground};\n    }\n\n    td,\n    th {\n      position: relative;\n      vertical-align: top;\n      border: 1px solid ${props => props.theme.tableDivider};\n      position: relative;\n      padding: 4px 8px;\n      text-align: ${props => (props.rtl ? \"right\" : \"left\")};\n      min-width: 100px;\n    }\n\n    .selectedCell {\n      background: ${props => props.readOnly ? \"inherit\" : props.theme.tableSelectedBackground};\n\n      /* fixes Firefox background color painting over border:\n       * https://bugzilla.mozilla.org/show_bug.cgi?id=688556 */\n      background-clip: padding-box;\n    }\n\n    .grip-column {\n      /* usage of ::after for all of the table grips works around a bug in\n       * prosemirror-tables that causes Safari to hang when selecting a cell\n       * in an empty table:\n       * https://github.com/ProseMirror/prosemirror/issues/947 */\n      &::after {\n        content: \"\";\n        cursor: pointer;\n        position: absolute;\n        top: -16px;\n        ${props => (props.rtl ? \"right\" : \"left\")}: 0;\n        width: 100%;\n        height: 12px;\n        background: ${props => props.theme.tableDivider};\n        border-bottom: 3px solid ${props => props.theme.background};\n        display: ${props => (props.readOnly ? \"none\" : \"block\")};\n      }\n\n      &:hover::after {\n        background: ${props => props.theme.text};\n      }\n      &.first::after {\n        border-top-${props => (props.rtl ? \"right\" : \"left\")}-radius: 3px;\n      }\n      &.last::after {\n        border-top-${props => (props.rtl ? \"left\" : \"right\")}-radius: 3px;\n      }\n      &.selected::after {\n        background: ${props => props.theme.tableSelected};\n      }\n    }\n\n    .grip-row {\n      &::after {\n        content: \"\";\n        cursor: pointer;\n        position: absolute;\n        ${props => (props.rtl ? \"right\" : \"left\")}: -16px;\n        top: 0;\n        height: 100%;\n        width: 12px;\n        background: ${props => props.theme.tableDivider};\n        border-${props => (props.rtl ? \"left\" : \"right\")}: 3px solid;\n        border-color: ${props => props.theme.background};\n        display: ${props => (props.readOnly ? \"none\" : \"block\")};\n      }\n\n      &:hover::after {\n        background: ${props => props.theme.text};\n      }\n      &.first::after {\n        border-top-${props => (props.rtl ? \"right\" : \"left\")}-radius: 3px;\n      }\n      &.last::after {\n        border-bottom-${props => (props.rtl ? \"right\" : \"left\")}-radius: 3px;\n      }\n      &.selected::after {\n        background: ${props => props.theme.tableSelected};\n      }\n    }\n\n    .grip-table {\n      &::after {\n        content: \"\";\n        cursor: pointer;\n        background: ${props => props.theme.tableDivider};\n        width: 13px;\n        height: 13px;\n        border-radius: 13px;\n        border: 2px solid ${props => props.theme.background};\n        position: absolute;\n        top: -18px;\n        ${props => (props.rtl ? \"right\" : \"left\")}: -18px;\n        display: ${props => (props.readOnly ? \"none\" : \"block\")};\n      }\n\n      &:hover::after {\n        background: ${props => props.theme.text};\n      }\n      &.selected::after {\n        background: ${props => props.theme.tableSelected};\n      }\n    }\n  }\n\n  .scrollable-wrapper {\n    position: relative;\n    margin: 0.5em 0px;\n    scrollbar-width: thin;\n    scrollbar-color: transparent transparent;\n\n    &:hover {\n      scrollbar-color: ${props => props.theme.scrollbarThumb}\n        ${props => props.theme.scrollbarBackground};\n    }\n\n    & ::-webkit-scrollbar {\n      height: 14px;\n      background-color: transparent;\n    }\n\n    &:hover ::-webkit-scrollbar {\n      background-color: ${props => props.theme.scrollbarBackground};\n    }\n\n    & ::-webkit-scrollbar-thumb {\n      background-color: transparent;\n      border: 3px solid transparent;\n      border-radius: 7px;\n    }\n\n    &:hover ::-webkit-scrollbar-thumb {\n      background-color: ${props => props.theme.scrollbarThumb};\n      border-color: ${props => props.theme.scrollbarBackground};\n    }\n  }\n\n  .scrollable {\n    overflow-y: hidden;\n    overflow-x: auto;\n    padding-${props => (props.rtl ? \"right\" : \"left\")}: 1em;\n    margin-${props => (props.rtl ? \"right\" : \"left\")}: -1em;\n    border-${props => (props.rtl ? \"right\" : \"left\")}: 1px solid transparent;\n    border-${props => (props.rtl ? \"left\" : \"right\")}: 1px solid transparent;\n    transition: border 250ms ease-in-out 0s;\n  }\n\n  .scrollable-shadow {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    ${props => (props.rtl ? \"right\" : \"left\")}: -1em;\n    width: 16px;\n    transition: box-shadow 250ms ease-in-out;\n    border: 0px solid transparent;\n    border-${props => (props.rtl ? \"right\" : \"left\")}-width: 1em;\n    pointer-events: none;\n\n    &.left {\n      box-shadow: 16px 0 16px -16px inset rgba(0, 0, 0, 0.25);\n      border-left: 1em solid ${props => props.theme.background};\n    }\n\n    &.right {\n      right: 0;\n      left: auto;\n      box-shadow: -16px 0 16px -16px inset rgba(0, 0, 0, 0.25);\n    }\n  }\n\n  .block-menu-trigger {\n    display: ${props => (props.readOnly ? \"none\" : \"inline\")};\n    width: 24px;\n    height: 24px;\n    color: ${props => props.theme.textSecondary};\n    background: none;\n    position: absolute;\n    transition: color 150ms cubic-bezier(0.175, 0.885, 0.32, 1.275),\n      transform 150ms cubic-bezier(0.175, 0.885, 0.32, 1.275);\n    outline: none;\n    border: 0;\n    padding: 0;\n    margin-top: 1px;\n    margin-${props => (props.rtl ? \"right\" : \"left\")}: -24px;\n\n    &:hover,\n    &:focus {\n      cursor: pointer;\n      transform: scale(1.2);\n      color: ${props => props.theme.text};\n    }\n  }\n\n  @media print {\n    .block-menu-trigger {\n      display: none;\n    }\n\n    .page-break {\n      opacity: 0;\n    }\n  }\n\n  .ProseMirror-gapcursor {\n    display: none;\n    pointer-events: none;\n    position: absolute;\n  }\n\n  .ProseMirror-gapcursor:after {\n    content: \"\";\n    display: block;\n    position: absolute;\n    top: -2px;\n    width: 20px;\n    border-top: 1px solid ${props => props.theme.cursor};\n    animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n  }\n\n  @keyframes ProseMirror-cursor-blink {\n    to {\n      visibility: hidden;\n    }\n  }\n\n  .ProseMirror-focused .ProseMirror-gapcursor {\n    display: block;\n  }\n\n  @media print {\n    em,\n    blockquote {\n      font-family: \"SF Pro Text\", ${props => props.theme.fontFamily};\n    }\n  }\n`;\nexports.default = RichMarkdownEditor;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}