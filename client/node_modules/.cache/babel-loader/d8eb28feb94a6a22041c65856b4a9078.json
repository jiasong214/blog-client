{"ast":null,"code":"export default class AuthService {\n  constructor(http, tokenStorage) {\n    this.http = http;\n    this.tokenStorage = tokenStorage;\n  }\n\n  async login(username, password) {\n    const data = this.http.fetch(`/auth/login`, {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        password\n      })\n    }); // console.log(data);\n    // this.tokenStorage.saveToken(data.token);\n\n    return data;\n  }\n\n  async me() {\n    const token = this.tokenStorage.getToken();\n    console.log(token);\n    return this.http.fetch(`/auth/me`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n  }\n\n  async logout() {\n    this.tokenStorage.clearToken();\n  }\n\n}","map":{"version":3,"sources":["/Users/jia/Desktop/Portfolio/personal-blog/client/src/service/auth.js"],"names":["AuthService","constructor","http","tokenStorage","login","username","password","data","fetch","method","body","JSON","stringify","me","token","getToken","console","log","headers","Authorization","logout","clearToken"],"mappings":"AAAA,eAAe,MAAMA,WAAN,CAAkB;AAC/BC,EAAAA,WAAW,CAAEC,IAAF,EAAQC,YAAR,EAAsB;AAC/B,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,YAAL,GAAoBA,YAApB;AACD;;AAEU,QAALC,KAAK,CAACC,QAAD,EAAWC,QAAX,EAAqB;AAC9B,UAAMC,IAAI,GAAI,KAAKL,IAAL,CAAUM,KAAV,CAAiB,aAAjB,EAA+B;AAC3CC,MAAAA,MAAM,EAAE,MADmC;AAE3CC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEP,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAAf;AAFqC,KAA/B,CAAd,CAD8B,CAM9B;AACA;;AAEA,WAAOC,IAAP;AACD;;AAEO,QAAFM,EAAE,GAAG;AACT,UAAMC,KAAK,GAAG,KAAKX,YAAL,CAAkBY,QAAlB,EAAd;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AAEA,WAAO,KAAKZ,IAAL,CAAUM,KAAV,CAAiB,UAAjB,EAA4B;AACjCC,MAAAA,MAAM,EAAE,KADyB;AAEjCS,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAG,UAASL,KAAM;AAAjC;AAFwB,KAA5B,CAAP;AAID;;AAEW,QAANM,MAAM,GAAG;AACb,SAAKjB,YAAL,CAAkBkB,UAAlB;AACD;;AA/B8B","sourcesContent":["export default class AuthService {\n  constructor (http, tokenStorage) {\n    this.http = http;\n    this.tokenStorage = tokenStorage;\n  }\n\n  async login(username, password) {\n    const data =  this.http.fetch(`/auth/login`, {\n      method: 'POST',\n      body: JSON.stringify({ username, password })\n    });\n\n    // console.log(data);\n    // this.tokenStorage.saveToken(data.token);\n\n    return data;\n  }\n\n  async me() {\n    const token = this.tokenStorage.getToken();\n\n    console.log(token)\n\n    return this.http.fetch(`/auth/me`, {\n      method: 'GET',\n      headers: { Authorization: `Bearer ${token}` }\n    });\n  }\n\n  async logout() {\n    this.tokenStorage.clearToken();\n  }\n}"]},"metadata":{},"sourceType":"module"}