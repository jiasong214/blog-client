{"ast":null,"code":"export default class PostService {\n  constructor(http, tokenStorage) {\n    this.http = http;\n    this.tokenStorage = tokenStorage;\n  } //common header part\n\n\n  getHeaders() {\n    //get a token from storage and return with headers format\n    const token = this.tokenStorage.getToken();\n    return {\n      Authorization: `Bearer ${token}`\n    };\n  }\n\n  async getPostsByCategory(category) {\n    const query = category ? `/post/category/${category}` : '/post';\n    console.log(query);\n    return this.http.fetch(`/post`, {\n      method: 'GET',\n      headers: this.getHeaders()\n    });\n  }\n\n  async getPostById(id) {\n    return this.http.fetch(`/post/${id}`, {\n      method: 'GET',\n      headers: this.getHeaders()\n    });\n  }\n\n  async createPost(category, title, text) {\n    return this.http.fetch(`/post`, {\n      method: 'POST',\n      headers: this.getHeaders(),\n      body: JSON.stringify({\n        category,\n        title,\n        text\n      })\n    });\n  }\n\n  async updatePost(id, category, title, text) {\n    return this.http.fetch(`/post/${id}`, {\n      method: 'PUT',\n      headers: this.getHeaders(),\n      body: JSON.stringify({\n        category,\n        title,\n        text\n      })\n    });\n  }\n\n  async deletePost(id) {\n    return this.http.fetch(`/post/${id}`, {\n      method: 'DELETE',\n      headers: this.getHeaders()\n    });\n  }\n\n  async getCategories() {\n    this.http.fetch(`/category`, {\n      method: 'GET',\n      headers: this.getHeaders()\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/jia/Desktop/Portfolio/personal-blog/client/src/service/post.js"],"names":["PostService","constructor","http","tokenStorage","getHeaders","token","getToken","Authorization","getPostsByCategory","category","query","console","log","fetch","method","headers","getPostById","id","createPost","title","text","body","JSON","stringify","updatePost","deletePost","getCategories"],"mappings":"AAAA,eAAe,MAAMA,WAAN,CAAkB;AAC/BC,EAAAA,WAAW,CAAEC,IAAF,EAAQC,YAAR,EAAsB;AAC/B,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,YAAL,GAAoBA,YAApB;AACD,GAJ8B,CAM/B;;;AACAC,EAAAA,UAAU,GAAG;AACX;AACA,UAAMC,KAAK,GAAG,KAAKF,YAAL,CAAkBG,QAAlB,EAAd;AACA,WAAO;AAAEC,MAAAA,aAAa,EAAG,UAASF,KAAM;AAAjC,KAAP;AACD;;AAGuB,QAAlBG,kBAAkB,CAACC,QAAD,EAAW;AACjC,UAAMC,KAAK,GAAGD,QAAQ,GAAI,kBAAiBA,QAAS,EAA9B,GAAkC,OAAxD;AAEAE,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAEA,WAAO,KAAKR,IAAL,CAAUW,KAAV,CAAiB,OAAjB,EAAyB;AAC9BC,MAAAA,MAAM,EAAE,KADsB;AAE9BC,MAAAA,OAAO,EAAE,KAAKX,UAAL;AAFqB,KAAzB,CAAP;AAID;;AAEgB,QAAXY,WAAW,CAACC,EAAD,EAAK;AACpB,WAAO,KAAKf,IAAL,CAAUW,KAAV,CAAiB,SAAQI,EAAG,EAA5B,EAA+B;AACpCH,MAAAA,MAAM,EAAE,KAD4B;AAEpCC,MAAAA,OAAO,EAAG,KAAKX,UAAL;AAF0B,KAA/B,CAAP;AAID;;AAEe,QAAVc,UAAU,CAACT,QAAD,EAAWU,KAAX,EAAkBC,IAAlB,EAAwB;AACtC,WAAO,KAAKlB,IAAL,CAAUW,KAAV,CAAiB,OAAjB,EAAyB;AAC9BC,MAAAA,MAAM,EAAE,MADsB;AAE9BC,MAAAA,OAAO,EAAE,KAAKX,UAAL,EAFqB;AAG9BiB,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEd,QAAAA,QAAF;AAAYU,QAAAA,KAAZ;AAAmBC,QAAAA;AAAnB,OAAf;AAHwB,KAAzB,CAAP;AAKD;;AAEe,QAAVI,UAAU,CAACP,EAAD,EAAKR,QAAL,EAAeU,KAAf,EAAsBC,IAAtB,EAA4B;AAC1C,WAAO,KAAKlB,IAAL,CAAUW,KAAV,CAAiB,SAAQI,EAAG,EAA5B,EAA+B;AACpCH,MAAAA,MAAM,EAAE,KAD4B;AAEpCC,MAAAA,OAAO,EAAE,KAAKX,UAAL,EAF2B;AAGpCiB,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEd,QAAAA,QAAF;AAAYU,QAAAA,KAAZ;AAAmBC,QAAAA;AAAnB,OAAf;AAH8B,KAA/B,CAAP;AAKD;;AAEe,QAAVK,UAAU,CAACR,EAAD,EAAK;AACnB,WAAO,KAAKf,IAAL,CAAUW,KAAV,CAAiB,SAAQI,EAAG,EAA5B,EAA+B;AACpCH,MAAAA,MAAM,EAAE,QAD4B;AAEpCC,MAAAA,OAAO,EAAE,KAAKX,UAAL;AAF2B,KAA/B,CAAP;AAID;;AAEkB,QAAbsB,aAAa,GAAG;AACpB,SAAKxB,IAAL,CAAUW,KAAV,CAAiB,WAAjB,EAA6B;AAC3BC,MAAAA,MAAM,EAAE,KADmB;AAE3BC,MAAAA,OAAO,EAAE,KAAKX,UAAL;AAFkB,KAA7B;AAID;;AA5D8B","sourcesContent":["export default class PostService {\n  constructor (http, tokenStorage) {\n    this.http = http;\n    this.tokenStorage = tokenStorage;\n  }\n\n  //common header part\n  getHeaders() {\n    //get a token from storage and return with headers format\n    const token = this.tokenStorage.getToken();\n    return { Authorization: `Bearer ${token}`, };\n  }\n\n\n  async getPostsByCategory(category) {\n    const query = category ? `/post/category/${category}` : '/post';\n\n    console.log(query)\n\n    return this.http.fetch(`/post`, {\n      method: 'GET',\n      headers: this.getHeaders()\n    });\n  }\n\n  async getPostById(id) {\n    return this.http.fetch(`/post/${id}`, {\n      method: 'GET',\n      headers : this.getHeaders()\n    });\n  }\n\n  async createPost(category, title, text) {\n    return this.http.fetch(`/post`, {\n      method: 'POST',\n      headers: this.getHeaders(),\n      body: JSON.stringify({ category, title, text })\n    });\n  }\n\n  async updatePost(id, category, title, text) {\n    return this.http.fetch(`/post/${id}`, {\n      method: 'PUT',\n      headers: this.getHeaders(),\n      body: JSON.stringify({ category, title, text })\n    });\n  }\n\n  async deletePost(id) {\n    return this.http.fetch(`/post/${id}`, {\n      method: 'DELETE',\n      headers: this.getHeaders()\n    });\n  }\n\n  async getCategories() {\n    this.http.fetch(`/category`, {\n      method: 'GET',\n      headers: this.getHeaders()\n    });\n  }\n}"]},"metadata":{},"sourceType":"module"}